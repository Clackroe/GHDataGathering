[
    {
        "author_association": "CONTRIBUTOR",
        "body": "https://github.com/ansible/ansible/issues/13262",
        "created_at": "2018-09-27T13:17:02Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425087297",
        "id": 425087297,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTA4NzI5Nw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425087297/reactions"
        },
        "updated_at": "2018-09-27T13:17:02Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425087297",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1215518?v=4",
            "events_url": "https://api.github.com/users/mkrizek/events{/privacy}",
            "followers_url": "https://api.github.com/users/mkrizek/followers",
            "following_url": "https://api.github.com/users/mkrizek/following{/other_user}",
            "gists_url": "https://api.github.com/users/mkrizek/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/mkrizek",
            "id": 1215518,
            "login": "mkrizek",
            "node_id": "MDQ6VXNlcjEyMTU1MTg=",
            "organizations_url": "https://api.github.com/users/mkrizek/orgs",
            "received_events_url": "https://api.github.com/users/mkrizek/received_events",
            "repos_url": "https://api.github.com/users/mkrizek/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/mkrizek/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mkrizek/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/mkrizek"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "@mkrizek Hmm, I searched for various combination of keywords, and that one did not stick out :-(\r\n\r\nThat said, I tried using `until:` with `block:`, `include:` and `include_tasks`, but the first one fails, and the 2 others only run the included file once.\r\n\r\n```yaml\r\n- hosts: localhost\r\n  tasks:\r\n  - include: taskboot.yml\r\n    until: 5|random == 5\r\n```\r\n\r\nBut apparently looping only works when using `loop:` ?\r\n\r\n```yaml\r\n- hosts: localhost\r\n  tasks:\r\n  - include: taskboot.yml\r\n    loop: [ 1, 2, 3, 4, 5 ]\r\n```",
        "created_at": "2018-09-27T13:35:34Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425094822",
        "id": 425094822,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTA5NDgyMg==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425094822/reactions"
        },
        "updated_at": "2018-09-27T13:39:45Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425094822",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/388198?v=4",
            "events_url": "https://api.github.com/users/dagwieers/events{/privacy}",
            "followers_url": "https://api.github.com/users/dagwieers/followers",
            "following_url": "https://api.github.com/users/dagwieers/following{/other_user}",
            "gists_url": "https://api.github.com/users/dagwieers/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/dagwieers",
            "id": 388198,
            "login": "dagwieers",
            "node_id": "MDQ6VXNlcjM4ODE5OA==",
            "organizations_url": "https://api.github.com/users/dagwieers/orgs",
            "received_events_url": "https://api.github.com/users/dagwieers/received_events",
            "repos_url": "https://api.github.com/users/dagwieers/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/dagwieers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dagwieers/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/dagwieers"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "Whatever I try, using `until:` does not work with `include:` and `include_tasks:`.\r\n\r\n```yaml\r\n- hosts: localhost\r\n  tasks:\r\n  - include: taskbook.yml\r\n    until: false\r\n    retries: 5\r\n    delay: 1\r\n```",
        "created_at": "2018-09-27T13:38:01Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425095730",
        "id": 425095730,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTA5NTczMA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425095730/reactions"
        },
        "updated_at": "2018-09-27T13:38:01Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425095730",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/388198?v=4",
            "events_url": "https://api.github.com/users/dagwieers/events{/privacy}",
            "followers_url": "https://api.github.com/users/dagwieers/followers",
            "following_url": "https://api.github.com/users/dagwieers/following{/other_user}",
            "gists_url": "https://api.github.com/users/dagwieers/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/dagwieers",
            "id": 388198,
            "login": "dagwieers",
            "node_id": "MDQ6VXNlcjM4ODE5OA==",
            "organizations_url": "https://api.github.com/users/dagwieers/orgs",
            "received_events_url": "https://api.github.com/users/dagwieers/received_events",
            "repos_url": "https://api.github.com/users/dagwieers/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/dagwieers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dagwieers/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/dagwieers"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "Yeah, `until` is not a valid argument for includes, see https://github.com/ansible/ansible/pull/46177.",
        "created_at": "2018-09-27T13:54:41Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425101690",
        "id": 425101690,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTEwMTY5MA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425101690/reactions"
        },
        "updated_at": "2018-09-27T13:54:41Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425101690",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1215518?v=4",
            "events_url": "https://api.github.com/users/mkrizek/events{/privacy}",
            "followers_url": "https://api.github.com/users/mkrizek/followers",
            "following_url": "https://api.github.com/users/mkrizek/following{/other_user}",
            "gists_url": "https://api.github.com/users/mkrizek/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/mkrizek",
            "id": 1215518,
            "login": "mkrizek",
            "node_id": "MDQ6VXNlcjEyMTU1MTg=",
            "organizations_url": "https://api.github.com/users/mkrizek/orgs",
            "received_events_url": "https://api.github.com/users/mkrizek/received_events",
            "repos_url": "https://api.github.com/users/mkrizek/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/mkrizek/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mkrizek/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/mkrizek"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "@mkrizek In other words, what we need is not possible, neither on blocks or on includes.\r\n\r\nSo I will keep this one open, but changed the title.",
        "created_at": "2018-09-27T13:58:09Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425102903",
        "id": 425102903,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTEwMjkwMw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 1,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425102903/reactions"
        },
        "updated_at": "2018-09-27T13:58:09Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425102903",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/388198?v=4",
            "events_url": "https://api.github.com/users/dagwieers/events{/privacy}",
            "followers_url": "https://api.github.com/users/dagwieers/followers",
            "following_url": "https://api.github.com/users/dagwieers/following{/other_user}",
            "gists_url": "https://api.github.com/users/dagwieers/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/dagwieers",
            "id": 388198,
            "login": "dagwieers",
            "node_id": "MDQ6VXNlcjM4ODE5OA==",
            "organizations_url": "https://api.github.com/users/dagwieers/orgs",
            "received_events_url": "https://api.github.com/users/dagwieers/received_events",
            "repos_url": "https://api.github.com/users/dagwieers/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/dagwieers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dagwieers/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/dagwieers"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "We do have an open proposal to \"taskify\" includes, which would allow things like until to work on them.\r\n\r\nhttps://github.com/ansible/proposals/issues/136\r\n\r\nI, however, do not believe that blocks should be extended to support this feature.",
        "created_at": "2018-09-27T14:10:59Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425107531",
        "id": 425107531,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTEwNzUzMQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425107531/reactions"
        },
        "updated_at": "2018-09-27T14:10:59Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425107531",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/39340?v=4",
            "events_url": "https://api.github.com/users/sivel/events{/privacy}",
            "followers_url": "https://api.github.com/users/sivel/followers",
            "following_url": "https://api.github.com/users/sivel/following{/other_user}",
            "gists_url": "https://api.github.com/users/sivel/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/sivel",
            "id": 39340,
            "login": "sivel",
            "node_id": "MDQ6VXNlcjM5MzQw",
            "organizations_url": "https://api.github.com/users/sivel/orgs",
            "received_events_url": "https://api.github.com/users/sivel/received_events",
            "repos_url": "https://api.github.com/users/sivel/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/sivel/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sivel/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/sivel"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "@sivel And what would be the reason for not extending the functionality to blocks ? As it would be a natural thing if it would work. (i.e. being able to loop every construction within a play)",
        "created_at": "2018-09-27T14:15:10Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425109036",
        "id": 425109036,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTEwOTAzNg==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 6,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 6,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425109036/reactions"
        },
        "updated_at": "2018-09-27T14:15:10Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425109036",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/388198?v=4",
            "events_url": "https://api.github.com/users/dagwieers/events{/privacy}",
            "followers_url": "https://api.github.com/users/dagwieers/followers",
            "following_url": "https://api.github.com/users/dagwieers/following{/other_user}",
            "gists_url": "https://api.github.com/users/dagwieers/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/dagwieers",
            "id": 388198,
            "login": "dagwieers",
            "node_id": "MDQ6VXNlcjM4ODE5OA==",
            "organizations_url": "https://api.github.com/users/dagwieers/orgs",
            "received_events_url": "https://api.github.com/users/dagwieers/received_events",
            "repos_url": "https://api.github.com/users/dagwieers/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/dagwieers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dagwieers/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/dagwieers"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "blocks are currently 'static' groupings, enabling loops on them (not just having tasks inherit them) would require making them dynamic ... as we saw with `include:` this has many consequences that are not immediately apparent.",
        "created_at": "2018-09-27T14:17:10Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425109781",
        "id": 425109781,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTEwOTc4MQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 1,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425109781/reactions"
        },
        "updated_at": "2018-09-27T14:17:10Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425109781",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/836171?v=4",
            "events_url": "https://api.github.com/users/bcoca/events{/privacy}",
            "followers_url": "https://api.github.com/users/bcoca/followers",
            "following_url": "https://api.github.com/users/bcoca/following{/other_user}",
            "gists_url": "https://api.github.com/users/bcoca/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bcoca",
            "id": 836171,
            "login": "bcoca",
            "node_id": "MDQ6VXNlcjgzNjE3MQ==",
            "organizations_url": "https://api.github.com/users/bcoca/orgs",
            "received_events_url": "https://api.github.com/users/bcoca/received_events",
            "repos_url": "https://api.github.com/users/bcoca/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bcoca/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bcoca/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bcoca"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "To extend what @bcoca mentions, doing so would require us to deprecate `block` and replace with something like `block_dynamic` and `block_static`.\r\n\r\nAlso, _every_ user of ansible utilizes blocks, whether explicit, or our internal implicit use of them.  They are a fundamental building block of how tasks are represented and executed.  Changing such an integral feature is sure to lead to unforeseen issues.",
        "created_at": "2018-09-27T14:20:58Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425111123",
        "id": 425111123,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTExMTEyMw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 3,
            "-1": 1,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 4,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425111123/reactions"
        },
        "updated_at": "2018-09-27T14:20:58Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425111123",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/39340?v=4",
            "events_url": "https://api.github.com/users/sivel/events{/privacy}",
            "followers_url": "https://api.github.com/users/sivel/followers",
            "following_url": "https://api.github.com/users/sivel/following{/other_user}",
            "gists_url": "https://api.github.com/users/sivel/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/sivel",
            "id": 39340,
            "login": "sivel",
            "node_id": "MDQ6VXNlcjM5MzQw",
            "organizations_url": "https://api.github.com/users/sivel/orgs",
            "received_events_url": "https://api.github.com/users/sivel/received_events",
            "repos_url": "https://api.github.com/users/sivel/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/sivel/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sivel/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/sivel"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "In any case, the documentation does not give any detail, or even does not discuss what is supposed to work and what not. There's no real distinction between \"loops\" and until-loops, not sure how we can make this more clear overal. The expectation is that what works for \"loops\" also works for until-loops.",
        "created_at": "2018-09-28T15:35:37Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425475438",
        "id": 425475438,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTQ3NTQzOA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 6,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 6,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425475438/reactions"
        },
        "updated_at": "2018-09-28T15:35:37Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425475438",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/388198?v=4",
            "events_url": "https://api.github.com/users/dagwieers/events{/privacy}",
            "followers_url": "https://api.github.com/users/dagwieers/followers",
            "following_url": "https://api.github.com/users/dagwieers/following{/other_user}",
            "gists_url": "https://api.github.com/users/dagwieers/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/dagwieers",
            "id": 388198,
            "login": "dagwieers",
            "node_id": "MDQ6VXNlcjM4ODE5OA==",
            "organizations_url": "https://api.github.com/users/dagwieers/orgs",
            "received_events_url": "https://api.github.com/users/dagwieers/received_events",
            "repos_url": "https://api.github.com/users/dagwieers/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/dagwieers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dagwieers/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/dagwieers"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "i would do both, allow until/retry loops to work with includes and then clearly document how they work ... so we have something to point at when it does not meet some people's expectations",
        "created_at": "2018-09-28T15:46:45Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425478791",
        "id": 425478791,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTQ3ODc5MQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 1,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425478791/reactions"
        },
        "updated_at": "2018-09-28T15:47:01Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425478791",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/836171?v=4",
            "events_url": "https://api.github.com/users/bcoca/events{/privacy}",
            "followers_url": "https://api.github.com/users/bcoca/followers",
            "following_url": "https://api.github.com/users/bcoca/following{/other_user}",
            "gists_url": "https://api.github.com/users/bcoca/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bcoca",
            "id": 836171,
            "login": "bcoca",
            "node_id": "MDQ6VXNlcjgzNjE3MQ==",
            "organizations_url": "https://api.github.com/users/bcoca/orgs",
            "received_events_url": "https://api.github.com/users/bcoca/received_events",
            "repos_url": "https://api.github.com/users/bcoca/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bcoca/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bcoca/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bcoca"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "Just to provide a small amount of detail about how includes work, is that dynamic includes are more of an internal trigger, as opposed to something that wraps execution.\r\n\r\nAs such, the task_executor short circuits early on an include, indicating to the strategy that it should read a file and insert task blocks into the TQM, that will later be processed by the task_executor.\r\n\r\nDue to this, there is no tracking of state as a roll up to the parent include.  So an until loop, which would rely on some version of a failed when/success scenario, would only refer to whether or not the strategy was told to do as detailed above.  In which case, it should always succeed.\r\n\r\nIn any case, the mode of operation is that we short circuit far before an until conditions are inspected.  If we just \"made it work\" right now, it definitely wouldn't do what a person expects.  To do what people expect, would require ansible/proposals#136 to be implemented.",
        "created_at": "2018-09-28T16:35:13Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425493523",
        "id": 425493523,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTQ5MzUyMw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425493523/reactions"
        },
        "updated_at": "2018-09-28T16:35:13Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425493523",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/39340?v=4",
            "events_url": "https://api.github.com/users/sivel/events{/privacy}",
            "followers_url": "https://api.github.com/users/sivel/followers",
            "following_url": "https://api.github.com/users/sivel/following{/other_user}",
            "gists_url": "https://api.github.com/users/sivel/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/sivel",
            "id": 39340,
            "login": "sivel",
            "node_id": "MDQ6VXNlcjM5MzQw",
            "organizations_url": "https://api.github.com/users/sivel/orgs",
            "received_events_url": "https://api.github.com/users/sivel/received_events",
            "repos_url": "https://api.github.com/users/sivel/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/sivel/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sivel/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/sivel"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "the until in this case would have to rely on vars set or registered from the included tasks as the registration of the include itself would be useless ... it would still 'work' just not how most other cases do.",
        "created_at": "2018-09-28T16:38:07Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425494377",
        "id": 425494377,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTQ5NDM3Nw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425494377/reactions"
        },
        "updated_at": "2018-09-28T16:38:07Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425494377",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/836171?v=4",
            "events_url": "https://api.github.com/users/bcoca/events{/privacy}",
            "followers_url": "https://api.github.com/users/bcoca/followers",
            "following_url": "https://api.github.com/users/bcoca/following{/other_user}",
            "gists_url": "https://api.github.com/users/bcoca/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bcoca",
            "id": 836171,
            "login": "bcoca",
            "node_id": "MDQ6VXNlcjgzNjE3MQ==",
            "organizations_url": "https://api.github.com/users/bcoca/orgs",
            "received_events_url": "https://api.github.com/users/bcoca/received_events",
            "repos_url": "https://api.github.com/users/bcoca/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bcoca/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bcoca/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bcoca"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "@dagwieers The other thread is locked now. But this recent suggestion (@sivel comment above) is brand new:\r\n\r\nhttps://github.com/ansible/ansible/issues/46203#issuecomment-425111123\r\n\r\nAnd you are saying we might want to leave open the possibility of someone else coming along later, to do a PR for looping over blocks off their own backs. Then at least we could make it crystal clear to them, as to make it as a separate and new `block_dynamic:`, and not touching the traditional static `block:` intact? Would that not make more sense to everybody ? Can we all agree upon that ahead of time? Because I agree with this idea. For all the same reasons - it's going to help prevent breaking other existing stuff which we rely on. Whilst still allowing the possibility of someone to come along, try making a PR for actually implementing it. Should we really want them to be making the best possible job and such. Then we should at least be clearly specifying this. If we already know that ahead of time. Which seems to be the case now? ",
        "created_at": "2018-09-28T21:01:02Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-425564865",
        "id": 425564865,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTU2NDg2NQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425564865/reactions"
        },
        "updated_at": "2018-09-28T21:01:02Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/425564865",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/63074?v=4",
            "events_url": "https://api.github.com/users/dreamcat4/events{/privacy}",
            "followers_url": "https://api.github.com/users/dreamcat4/followers",
            "following_url": "https://api.github.com/users/dreamcat4/following{/other_user}",
            "gists_url": "https://api.github.com/users/dreamcat4/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/dreamcat4",
            "id": 63074,
            "login": "dreamcat4",
            "node_id": "MDQ6VXNlcjYzMDc0",
            "organizations_url": "https://api.github.com/users/dreamcat4/orgs",
            "received_events_url": "https://api.github.com/users/dreamcat4/received_events",
            "repos_url": "https://api.github.com/users/dreamcat4/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/dreamcat4/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dreamcat4/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/dreamcat4"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "Linking this here https://github.com/ansible/ansible/issues/16621",
        "created_at": "2018-10-31T14:29:00Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-434708400",
        "id": 434708400,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDcwODQwMA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/434708400/reactions"
        },
        "updated_at": "2018-10-31T14:29:00Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/434708400",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1215518?v=4",
            "events_url": "https://api.github.com/users/mkrizek/events{/privacy}",
            "followers_url": "https://api.github.com/users/mkrizek/followers",
            "following_url": "https://api.github.com/users/mkrizek/following{/other_user}",
            "gists_url": "https://api.github.com/users/mkrizek/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/mkrizek",
            "id": 1215518,
            "login": "mkrizek",
            "node_id": "MDQ6VXNlcjEyMTU1MTg=",
            "organizations_url": "https://api.github.com/users/mkrizek/orgs",
            "received_events_url": "https://api.github.com/users/mkrizek/received_events",
            "repos_url": "https://api.github.com/users/mkrizek/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/mkrizek/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mkrizek/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/mkrizek"
        }
    },
    {
        "author_association": "NONE",
        "body": "+1 For implementing this feature",
        "created_at": "2018-11-05T13:00:06Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-435865429",
        "id": 435865429,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTg2NTQyOQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 2,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 2,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/435865429/reactions"
        },
        "updated_at": "2018-11-07T12:28:06Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/435865429",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/12375795?v=4",
            "events_url": "https://api.github.com/users/deatheros/events{/privacy}",
            "followers_url": "https://api.github.com/users/deatheros/followers",
            "following_url": "https://api.github.com/users/deatheros/following{/other_user}",
            "gists_url": "https://api.github.com/users/deatheros/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/deatheros",
            "id": 12375795,
            "login": "deatheros",
            "node_id": "MDQ6VXNlcjEyMzc1Nzk1",
            "organizations_url": "https://api.github.com/users/deatheros/orgs",
            "received_events_url": "https://api.github.com/users/deatheros/received_events",
            "repos_url": "https://api.github.com/users/deatheros/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/deatheros/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/deatheros/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/deatheros"
        }
    },
    {
        "author_association": "NONE",
        "body": "It is natural that a block should be repeatable. Otherwise, it is very counterintuitive. It confuses.\r\n\r\nAnd there seems to be no way to write a playbook with loop with more than one statement. No programming language is so limited.",
        "created_at": "2018-11-30T16:24:45Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-443257669",
        "id": 443257669,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzI1NzY2OQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 25,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 25,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/443257669/reactions"
        },
        "updated_at": "2018-11-30T16:24:45Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/443257669",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1418033?v=4",
            "events_url": "https://api.github.com/users/ramon-garcia/events{/privacy}",
            "followers_url": "https://api.github.com/users/ramon-garcia/followers",
            "following_url": "https://api.github.com/users/ramon-garcia/following{/other_user}",
            "gists_url": "https://api.github.com/users/ramon-garcia/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/ramon-garcia",
            "id": 1418033,
            "login": "ramon-garcia",
            "node_id": "MDQ6VXNlcjE0MTgwMzM=",
            "organizations_url": "https://api.github.com/users/ramon-garcia/orgs",
            "received_events_url": "https://api.github.com/users/ramon-garcia/received_events",
            "repos_url": "https://api.github.com/users/ramon-garcia/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/ramon-garcia/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ramon-garcia/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/ramon-garcia"
        }
    },
    {
        "author_association": "NONE",
        "body": "It looks like in Ansible, if one needs to do something complex, one should write an action plugin. This is what we are going to do.\r\n\r\nHere one has many examples:\r\nhttps://github.com/ansible/ansible/tree/devel/lib/ansible/plugins/action\r\n\r\nBest regards",
        "created_at": "2018-11-30T21:02:25Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-443338403",
        "id": 443338403,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzMzODQwMw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/443338403/reactions"
        },
        "updated_at": "2018-11-30T21:02:25Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/443338403",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1418033?v=4",
            "events_url": "https://api.github.com/users/ramon-garcia/events{/privacy}",
            "followers_url": "https://api.github.com/users/ramon-garcia/followers",
            "following_url": "https://api.github.com/users/ramon-garcia/following{/other_user}",
            "gists_url": "https://api.github.com/users/ramon-garcia/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/ramon-garcia",
            "id": 1418033,
            "login": "ramon-garcia",
            "node_id": "MDQ6VXNlcjE0MTgwMzM=",
            "organizations_url": "https://api.github.com/users/ramon-garcia/orgs",
            "received_events_url": "https://api.github.com/users/ramon-garcia/received_events",
            "repos_url": "https://api.github.com/users/ramon-garcia/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/ramon-garcia/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ramon-garcia/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/ramon-garcia"
        }
    },
    {
        "author_association": "NONE",
        "body": "This is absolutely a shortcoming.  Ansible has been perfect for most of my needs so far, but it seems like expanding the capabilities of blocks would make Ansible a lot better solution. ",
        "created_at": "2019-03-26T20:48:14Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-476845057",
        "id": 476845057,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Njg0NTA1Nw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 7,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 7,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/476845057/reactions"
        },
        "updated_at": "2019-03-26T20:48:14Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/476845057",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/14332693?v=4",
            "events_url": "https://api.github.com/users/Freeze/events{/privacy}",
            "followers_url": "https://api.github.com/users/Freeze/followers",
            "following_url": "https://api.github.com/users/Freeze/following{/other_user}",
            "gists_url": "https://api.github.com/users/Freeze/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Freeze",
            "id": 14332693,
            "login": "Freeze",
            "node_id": "MDQ6VXNlcjE0MzMyNjkz",
            "organizations_url": "https://api.github.com/users/Freeze/orgs",
            "received_events_url": "https://api.github.com/users/Freeze/received_events",
            "repos_url": "https://api.github.com/users/Freeze/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Freeze/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Freeze/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Freeze"
        }
    },
    {
        "author_association": "NONE",
        "body": "I tried to use `until` in a `include_tasks` and it didn't worked. \r\n\r\nWhat I did as a workaround was to create a yml file that include the task (`loop.yml`) and call itself recursively (`recursive.yml`) while the condition is still not satisfied.\r\n\r\n_recursive.yml:_\r\n\r\n```yml\r\n---\r\n\r\n- name: 'checking {{ watch_job }} status (recursive)'\r\n  include_tasks: 'loop.yml'\r\n\r\n- name: 'count ({{ watch_count | int + 1 }})'\r\n  set_fact:\r\n    watch_count: '{{ watch_count | int + 1 }}'\r\n\r\n- name: 'retries ({{ (watch_timeout | int / watch_poll | int) | int }})'\r\n  set_fact:\r\n    watch_retries: '{{ (watch_timeout | int / watch_poll | int) | int }}'\r\n\r\n- name: 'timeout ({{ watch_timeout }} seconds)'\r\n  fail: \r\n    msg: \"Timeout of {{ watch_timeout }} seconds exceeded ({{ watch_retries }} retries)\"\r\n  when: (not watch_status.finished) and (watch_count | int > watch_retries | int)\r\n\r\n- name: 'wait for {{ watch_poll }} seconds'\r\n  wait_for:\r\n    timeout: '{{ watch_poll | int }}'\r\n  when: not watch_status.finished\r\n\r\n- name: 'call itself recursively'\r\n  include_tasks: 'recursive.yml'\r\n  when: not watch_status.finished\r\n```\r\n\r\nIn the above file, I included a timeout in the case of taking too long (this is in a role that [shows the output of what is running in the hosts](https://github.com/ansible/ansible/issues/30411#issuecomment-471277785)).\r\n\r\nNot the ideal solution, but worked for me and was relatively easy to change using `until` to do the above.",
        "created_at": "2019-03-26T23:37:19Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-476896143",
        "id": 476896143,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Njg5NjE0Mw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 12,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 1,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 13,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/476896143/reactions"
        },
        "updated_at": "2019-03-26T23:37:19Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/476896143",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/19873627?v=4",
            "events_url": "https://api.github.com/users/lucasbasquerotto/events{/privacy}",
            "followers_url": "https://api.github.com/users/lucasbasquerotto/followers",
            "following_url": "https://api.github.com/users/lucasbasquerotto/following{/other_user}",
            "gists_url": "https://api.github.com/users/lucasbasquerotto/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/lucasbasquerotto",
            "id": 19873627,
            "login": "lucasbasquerotto",
            "node_id": "MDQ6VXNlcjE5ODczNjI3",
            "organizations_url": "https://api.github.com/users/lucasbasquerotto/orgs",
            "received_events_url": "https://api.github.com/users/lucasbasquerotto/received_events",
            "repos_url": "https://api.github.com/users/lucasbasquerotto/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/lucasbasquerotto/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lucasbasquerotto/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/lucasbasquerotto"
        }
    },
    {
        "author_association": "NONE",
        "body": "+1 for this feature !",
        "created_at": "2019-05-07T09:11:49Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-490000771",
        "id": 490000771,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDAwMDc3MQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 6,
            "-1": 5,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 11,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/490000771/reactions"
        },
        "updated_at": "2019-05-07T09:11:49Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/490000771",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/2209728?v=4",
            "events_url": "https://api.github.com/users/efazenda/events{/privacy}",
            "followers_url": "https://api.github.com/users/efazenda/followers",
            "following_url": "https://api.github.com/users/efazenda/following{/other_user}",
            "gists_url": "https://api.github.com/users/efazenda/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/efazenda",
            "id": 2209728,
            "login": "efazenda",
            "node_id": "MDQ6VXNlcjIyMDk3Mjg=",
            "organizations_url": "https://api.github.com/users/efazenda/orgs",
            "received_events_url": "https://api.github.com/users/efazenda/received_events",
            "repos_url": "https://api.github.com/users/efazenda/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/efazenda/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/efazenda/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/efazenda"
        }
    },
    {
        "author_association": "NONE",
        "body": "+1",
        "created_at": "2019-05-07T20:16:18Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-490239028",
        "id": 490239028,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDIzOTAyOA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 6,
            "-1": 5,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 11,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/490239028/reactions"
        },
        "updated_at": "2019-05-07T20:16:18Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/490239028",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/2997782?v=4",
            "events_url": "https://api.github.com/users/woopstar/events{/privacy}",
            "followers_url": "https://api.github.com/users/woopstar/followers",
            "following_url": "https://api.github.com/users/woopstar/following{/other_user}",
            "gists_url": "https://api.github.com/users/woopstar/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/woopstar",
            "id": 2997782,
            "login": "woopstar",
            "node_id": "MDQ6VXNlcjI5OTc3ODI=",
            "organizations_url": "https://api.github.com/users/woopstar/orgs",
            "received_events_url": "https://api.github.com/users/woopstar/received_events",
            "repos_url": "https://api.github.com/users/woopstar/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/woopstar/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/woopstar/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/woopstar"
        }
    },
    {
        "author_association": "NONE",
        "body": "+1 for until loops on blocks",
        "created_at": "2019-05-27T15:44:08Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-496251425",
        "id": 496251425,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjI1MTQyNQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 1,
            "-1": 5,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 6,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/496251425/reactions"
        },
        "updated_at": "2019-05-27T15:44:08Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/496251425",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/21317549?v=4",
            "events_url": "https://api.github.com/users/wahab-icp/events{/privacy}",
            "followers_url": "https://api.github.com/users/wahab-icp/followers",
            "following_url": "https://api.github.com/users/wahab-icp/following{/other_user}",
            "gists_url": "https://api.github.com/users/wahab-icp/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/wahab-icp",
            "id": 21317549,
            "login": "wahab-icp",
            "node_id": "MDQ6VXNlcjIxMzE3NTQ5",
            "organizations_url": "https://api.github.com/users/wahab-icp/orgs",
            "received_events_url": "https://api.github.com/users/wahab-icp/received_events",
            "repos_url": "https://api.github.com/users/wahab-icp/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/wahab-icp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wahab-icp/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/wahab-icp"
        }
    },
    {
        "author_association": "NONE",
        "body": "I have been searching a way to do `until` (infinitely) for a success on all modules on the block and I managed to do this with `include_tasks` with `rescue`\r\n\r\nI could not use regular `until` because the IP is changing over time and had to modify it on the run\r\n\r\n> wait_until_success.yml\r\n\r\n```\r\n- name: 'Wait until success'\r\n  block:\r\n    - name: Get server updated ip\r\n      uri:\r\n        url: https://localhost/ip\r\n        return_content: yes\r\n        status_code: 200\r\n      register: ip\r\n\r\n    - name: ssh to the server\r\n      wait_for:\r\n        host: \"{{ ip }}\"\r\n        port: 22\r\n        timeout: 30\r\n        state: started\r\n  rescue:\r\n    - debug:\r\n        msg: \"Failed to connect - Retrying...\"\r\n    - include_tasks: wait_until_success.yml\r\n```",
        "created_at": "2019-05-28T14:38:49Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-496545220",
        "id": 496545220,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjU0NTIyMA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 18,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 18,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/496545220/reactions"
        },
        "updated_at": "2019-05-28T14:43:59Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/496545220",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/42803777?v=4",
            "events_url": "https://api.github.com/users/matanbaru/events{/privacy}",
            "followers_url": "https://api.github.com/users/matanbaru/followers",
            "following_url": "https://api.github.com/users/matanbaru/following{/other_user}",
            "gists_url": "https://api.github.com/users/matanbaru/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/matanbaru",
            "id": 42803777,
            "login": "matanbaru",
            "node_id": "MDQ6VXNlcjQyODAzNzc3",
            "organizations_url": "https://api.github.com/users/matanbaru/orgs",
            "received_events_url": "https://api.github.com/users/matanbaru/received_events",
            "repos_url": "https://api.github.com/users/matanbaru/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/matanbaru/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/matanbaru/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/matanbaru"
        }
    },
    {
        "author_association": "NONE",
        "body": "Same as @matanbaru with a way to fail after multiple retries\r\n\r\n```yml\r\n- name: 'Wait until success'\r\n  block:\r\n    - name: Set the retry count\r\n      set_fact:\r\n        retry_count: \"{{ 0 if retry_count is undefined else retry_count|int + 1 }}\"\r\n\r\n    - name: Get server updated ip\r\n      uri:\r\n        url: https://localhost/ip\r\n        return_content: yes\r\n        status_code: 200\r\n      register: ip\r\n\r\n    - name: ssh to the server\r\n      wait_for:\r\n        host: \"{{ ip }}\"\r\n        port: 22\r\n        timeout: 30\r\n        state: started\r\n  rescue:\r\n    - fail:\r\n        msg: Ended after 5 retries\r\n      when: retry_count|int == 5\r\n\r\n    - debug:\r\n        msg: \"Failed to connect - Retrying...\"\r\n\r\n    - include_tasks: wait_until_success.yml\r\n```",
        "created_at": "2019-11-20T13:56:11Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-556013701",
        "id": 556013701,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDU1NjAxMzcwMQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 2,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 1,
            "hooray": 0,
            "laugh": 0,
            "rocket": 12,
            "total_count": 15,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/556013701/reactions"
        },
        "updated_at": "2019-12-18T13:39:21Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/556013701",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1218714?v=4",
            "events_url": "https://api.github.com/users/Ovski4/events{/privacy}",
            "followers_url": "https://api.github.com/users/Ovski4/followers",
            "following_url": "https://api.github.com/users/Ovski4/following{/other_user}",
            "gists_url": "https://api.github.com/users/Ovski4/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Ovski4",
            "id": 1218714,
            "login": "Ovski4",
            "node_id": "MDQ6VXNlcjEyMTg3MTQ=",
            "organizations_url": "https://api.github.com/users/Ovski4/orgs",
            "received_events_url": "https://api.github.com/users/Ovski4/received_events",
            "repos_url": "https://api.github.com/users/Ovski4/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Ovski4/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Ovski4/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Ovski4"
        }
    },
    {
        "author_association": "NONE",
        "body": "+1 could you please add retry-until in loops !\r\nAbsolutely \"Must Have\" feature !",
        "created_at": "2020-06-21T06:27:26Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-647085168",
        "id": 647085168,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzA4NTE2OA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 1,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/647085168/reactions"
        },
        "updated_at": "2020-06-21T06:27:26Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/647085168",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/23147820?v=4",
            "events_url": "https://api.github.com/users/frsauvage/events{/privacy}",
            "followers_url": "https://api.github.com/users/frsauvage/followers",
            "following_url": "https://api.github.com/users/frsauvage/following{/other_user}",
            "gists_url": "https://api.github.com/users/frsauvage/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/frsauvage",
            "id": 23147820,
            "login": "frsauvage",
            "node_id": "MDQ6VXNlcjIzMTQ3ODIw",
            "organizations_url": "https://api.github.com/users/frsauvage/orgs",
            "received_events_url": "https://api.github.com/users/frsauvage/received_events",
            "repos_url": "https://api.github.com/users/frsauvage/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/frsauvage/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/frsauvage/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/frsauvage"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "+1\r\n",
        "created_at": "2020-07-03T22:10:03Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-653686720",
        "id": 653686720,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzY4NjcyMA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 1,
            "-1": 2,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 3,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/653686720/reactions"
        },
        "updated_at": "2020-07-03T22:10:03Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/653686720",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/27526373?v=4",
            "events_url": "https://api.github.com/users/chris93111/events{/privacy}",
            "followers_url": "https://api.github.com/users/chris93111/followers",
            "following_url": "https://api.github.com/users/chris93111/following{/other_user}",
            "gists_url": "https://api.github.com/users/chris93111/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/chris93111",
            "id": 27526373,
            "login": "chris93111",
            "node_id": "MDQ6VXNlcjI3NTI2Mzcz",
            "organizations_url": "https://api.github.com/users/chris93111/orgs",
            "received_events_url": "https://api.github.com/users/chris93111/received_events",
            "repos_url": "https://api.github.com/users/chris93111/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/chris93111/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chris93111/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/chris93111"
        }
    },
    {
        "author_association": "NONE",
        "body": "+1",
        "created_at": "2020-07-29T16:46:36Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-665776838",
        "id": 665776838,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTc3NjgzOA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/665776838/reactions"
        },
        "updated_at": "2020-07-29T16:46:36Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/665776838",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/987055?v=4",
            "events_url": "https://api.github.com/users/karolyi/events{/privacy}",
            "followers_url": "https://api.github.com/users/karolyi/followers",
            "following_url": "https://api.github.com/users/karolyi/following{/other_user}",
            "gists_url": "https://api.github.com/users/karolyi/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/karolyi",
            "id": 987055,
            "login": "karolyi",
            "node_id": "MDQ6VXNlcjk4NzA1NQ==",
            "organizations_url": "https://api.github.com/users/karolyi/orgs",
            "received_events_url": "https://api.github.com/users/karolyi/received_events",
            "repos_url": "https://api.github.com/users/karolyi/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/karolyi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/karolyi/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/karolyi"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "I've locked this to contributors for now.  Adding `+1` comments is too noisy.  For future reference, add a reaction to the issue body, and don't comment.",
        "created_at": "2020-07-29T16:50:34Z",
        "html_url": "https://github.com/ansible/ansible/issues/46203#issuecomment-665778983",
        "id": 665778983,
        "issue_url": "https://api.github.com/repos/ansible/ansible/issues/46203",
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTc3ODk4Mw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/ansible/ansible/issues/comments/665778983/reactions"
        },
        "updated_at": "2020-07-29T16:50:34Z",
        "url": "https://api.github.com/repos/ansible/ansible/issues/comments/665778983",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/39340?v=4",
            "events_url": "https://api.github.com/users/sivel/events{/privacy}",
            "followers_url": "https://api.github.com/users/sivel/followers",
            "following_url": "https://api.github.com/users/sivel/following{/other_user}",
            "gists_url": "https://api.github.com/users/sivel/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/sivel",
            "id": 39340,
            "login": "sivel",
            "node_id": "MDQ6VXNlcjM5MzQw",
            "organizations_url": "https://api.github.com/users/sivel/orgs",
            "received_events_url": "https://api.github.com/users/sivel/received_events",
            "repos_url": "https://api.github.com/users/sivel/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/sivel/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sivel/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/sivel"
        }
    }
]