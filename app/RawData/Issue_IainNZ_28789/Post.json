{
    "active_lock_reason": "too heated",
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Example 1\r\n\r\nThis came up with a student who upgraded from 0.6 to 1.0 directly, so never even got a chance to see a deprecation warning, let alone find an explanation for new behavior:\r\n\r\n```julia\r\njulia> beforefor = true\r\ntrue\r\n\r\njulia> for i in 1:2\r\n         beforefor = false\r\n       end\r\n\r\njulia> beforefor  # this is surprising bit\r\ntrue\r\n\r\njulia> beforeif = true\r\ntrue\r\n\r\njulia> if 1 == 1\r\n         beforeif = false\r\n       end\r\nfalse\r\n\r\njulia> beforeif  # Another surprise!\r\nfalse\r\n\r\njulia> function foo()\r\n         infunc = true\r\n         for i in 1:10\r\n           infunc = false\r\n         end\r\n         @show infunc\r\n       end\r\nfoo (generic function with 1 method)\r\n\r\njulia> foo()  # \"I don't get this\"\r\ninfunc = false \r\n```\r\n\r\n### Example 2\r\n\r\n```julia\r\njulia> total_lines = 0\r\n0\r\n\r\njulia> list_of_files = [\"a\", \"b\", \"c\"]\r\n3-element Array{String,1}:\r\n \"a\"\r\n \"b\"\r\n \"c\"\r\n\r\njulia> for file in list_of_files\r\n         # fake read file\r\n         lines_in_file = 5\r\n         total_lines += lines_in_file\r\n       end\r\nERROR: UndefVarError: total_lines not defined\r\nStacktrace:\r\n [1] top-level scope at ./REPL[3]:4 [inlined]\r\n [2] top-level scope at ./none:0\r\n\r\njulia> total_lines  # This crushs the students willingness to learn\r\n0\r\n```\r\n\r\nI \"get\" why this happens in the sense that I think I can explain, with sufficient reference to the arcana in the manual about what introduces scopes and what doesn't, but I think that this is problematic for interactive use.\r\n\r\nIn example one, you get a silent failure. In example two, you get an error message that is very there-is-no-spoon. Thats roughly comparable to some Python code I wrote in a notebook at work today.\r\n\r\nI'm not sure what the rules are in Python, but I do know that generally you can't assign to things at the global scope without invoking global. But at the REPL it does work, presumably because at the REPL the rules are different or the same logic as if they were all are in the scope of function is applied.\r\n\r\nI can't language-lawyer the rules enough to propose the concrete change I would like, and based on Slack this isn't even necessarily perceived as an issue by some people, so I don't know where to go with this except to flag it.\r\n\r\nCross-refs:\r\n#19324\r\nhttps://discourse.julialang.org/t/repl-and-for-loops-scope-behavior-change/13514\r\nhttps://stackoverflow.com/questions/51930537/scope-of-variables-in-julia",
    "closed_at": "2020-01-28T20:33:39Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/744556?v=4",
        "events_url": "https://api.github.com/users/JeffBezanson/events{/privacy}",
        "followers_url": "https://api.github.com/users/JeffBezanson/followers",
        "following_url": "https://api.github.com/users/JeffBezanson/following{/other_user}",
        "gists_url": "https://api.github.com/users/JeffBezanson/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/JeffBezanson",
        "id": 744556,
        "login": "JeffBezanson",
        "node_id": "MDQ6VXNlcjc0NDU1Ng==",
        "organizations_url": "https://api.github.com/users/JeffBezanson/orgs",
        "received_events_url": "https://api.github.com/users/JeffBezanson/received_events",
        "repos_url": "https://api.github.com/users/JeffBezanson/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/JeffBezanson/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JeffBezanson/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/JeffBezanson"
    },
    "comments": 98,
    "comments_url": "https://api.github.com/repos/JuliaLang/julia/issues/28789/comments",
    "created_at": "2018-08-21T03:36:57Z",
    "events_url": "https://api.github.com/repos/JuliaLang/julia/issues/28789/events",
    "html_url": "https://github.com/JuliaLang/julia/issues/28789",
    "id": 352373552,
    "labels": [
        {
            "color": "c7def8",
            "default": false,
            "description": "Julia's REPL (Read Eval Print Loop)",
            "id": 42281298,
            "name": "REPL",
            "node_id": "MDU6TGFiZWw0MjI4MTI5OA==",
            "url": "https://api.github.com/repos/JuliaLang/julia/labels/REPL"
        },
        {
            "color": "a05255",
            "default": false,
            "description": "Marginal behavior change acceptable for a minor release",
            "id": 1056009044,
            "name": "minor change",
            "node_id": "MDU6TGFiZWwxMDU2MDA5MDQ0",
            "url": "https://api.github.com/repos/JuliaLang/julia/labels/minor%20change"
        }
    ],
    "labels_url": "https://api.github.com/repos/JuliaLang/julia/issues/28789/labels{/name}",
    "locked": true,
    "milestone": null,
    "node_id": "MDU6SXNzdWUzNTIzNzM1NTI=",
    "number": 28789,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 15,
        "-1": 0,
        "confused": 1,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 16,
        "url": "https://api.github.com/repos/JuliaLang/julia/issues/28789/reactions"
    },
    "repository_url": "https://api.github.com/repos/JuliaLang/julia",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/JuliaLang/julia/issues/28789/timeline",
    "title": "Global variable scope rules lead to unintuitive behavior at the REPL/notebook",
    "updated_at": "2022-03-13T06:59:53Z",
    "url": "https://api.github.com/repos/JuliaLang/julia/issues/28789",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/692635?v=4",
        "events_url": "https://api.github.com/users/IainNZ/events{/privacy}",
        "followers_url": "https://api.github.com/users/IainNZ/followers",
        "following_url": "https://api.github.com/users/IainNZ/following{/other_user}",
        "gists_url": "https://api.github.com/users/IainNZ/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/IainNZ",
        "id": 692635,
        "login": "IainNZ",
        "node_id": "MDQ6VXNlcjY5MjYzNQ==",
        "organizations_url": "https://api.github.com/users/IainNZ/orgs",
        "received_events_url": "https://api.github.com/users/IainNZ/received_events",
        "repos_url": "https://api.github.com/users/IainNZ/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/IainNZ/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/IainNZ/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/IainNZ"
    }
}