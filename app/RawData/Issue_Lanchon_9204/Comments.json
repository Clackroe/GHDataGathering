[
    {
        "author_association": "NONE",
        "body": "if you have trouble reproducing this issue, here's a real world case:\r\nhttps://github.com/DexPatcher/dexpatcher-gradle/commit/44d3a997ab8a47cc9b278100a18a66b21c19156d\r\n\r\nas explained, without `DuplicatesStrategy.FAIL` zip2 ends up containing two copies of zip1.\r\nhere is such a zip2 file: [app-components.aar.zip](https://github.com/gradle/gradle/files/3111315/app-components.aar.zip)\r\n",
        "created_at": "2019-04-24T08:34:03Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486124803",
        "id": 486124803,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjEyNDgwMw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486124803/reactions"
        },
        "updated_at": "2019-04-24T08:34:03Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486124803",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "To speed up the triage of this issue, it would be much more beneficial if a self-contained example could be provided.",
        "created_at": "2019-04-24T11:06:48Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486177637",
        "id": 486177637,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjE3NzYzNw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486177637/reactions"
        },
        "updated_at": "2019-04-24T11:06:48Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486177637",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/22181740?v=4",
            "events_url": "https://api.github.com/users/lacasseio/events{/privacy}",
            "followers_url": "https://api.github.com/users/lacasseio/followers",
            "following_url": "https://api.github.com/users/lacasseio/following{/other_user}",
            "gists_url": "https://api.github.com/users/lacasseio/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/lacasseio",
            "id": 22181740,
            "login": "lacasseio",
            "node_id": "MDQ6VXNlcjIyMTgxNzQw",
            "organizations_url": "https://api.github.com/users/lacasseio/orgs",
            "received_events_url": "https://api.github.com/users/lacasseio/received_events",
            "repos_url": "https://api.github.com/users/lacasseio/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/lacasseio/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lacasseio/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/lacasseio"
        }
    },
    {
        "author_association": "NONE",
        "body": "i'll try to help you with this.",
        "created_at": "2019-04-24T15:28:40Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486291325",
        "id": 486291325,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjI5MTMyNQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486291325/reactions"
        },
        "updated_at": "2019-04-24T15:28:40Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486291325",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "NONE",
        "body": "here is a repro `build.gradle`:\r\n\r\n```\r\n// Zip nesting bug repo\r\n\r\n// The regular zip task nests fine:\r\n\r\ndef zip1 = project.tasks.register('zip1', Zip) {\r\n    destinationDirectory.set layout.projectDirectory\r\n    archiveBaseName.set 'zip1'\r\n    from 'build.gradle'\r\n}\r\n\r\n// This extended zip task fails to nest due to the @OutputFile annotation:\r\n\r\nclass TestZipTask extends Zip {\r\n    @Override @OutputFile File getArchivePath() {\r\n        super.getArchivePath()\r\n    }\r\n}\r\n\r\ndef testZip1 = project.tasks.register('testZip1', TestZipTask) {\r\n    destinationDirectory.set layout.projectDirectory\r\n    archiveBaseName.set 'testZip1'\r\n    from 'build.gradle'\r\n}\r\n\r\n// Run this task to get the error:\r\n\r\ndef zip2 = project.tasks.register('zip2', Zip) {\r\n    destinationDirectory.set layout.projectDirectory\r\n    archiveBaseName.set 'z2'\r\n    duplicatesStrategy = DuplicatesStrategy.FAIL\r\n    from zip1       // no error\r\n    from testZip1   // DuplicateFileCopyingException: Encountered duplicate path \"lazyZip1.zip\" during copy operation configured with DuplicatesStrategy.FAIL\r\n}\r\n```\r\n\r\nthe `@OutputFile` annotation in the zip's `archivePath` getter is what is causing the issue. the removal of the `@OutputFile` annotation in Gradle 5.1 introduces yet another incompatibility to the archive tasks, which i think wasn't previously reported.\r\n\r\nFYI, here is the full stack trace:\r\n\r\n```\r\n$ gradle zip2 -s\r\n> Task :zip2 FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':zip2'.\r\n> Encountered duplicate path \"testZip1.zip\" during copy operation configured with DuplicatesStrategy.FAIL\r\n\r\n* Try:\r\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Exception is:\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':zip2'.\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.accept(ExecuteActionsTaskExecuter.java:151)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$3.accept(ExecuteActionsTaskExecuter.java:148)\r\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:191)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:141)\r\n        at org.gradle.api.internal.tasks.execution.ResolveBeforeExecutionStateTaskExecuter.execute(ResolveBeforeExecutionStateTaskExecuter.java:75)\r\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:62)\r\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:108)\r\n        at org.gradle.api.internal.tasks.execution.ResolveBeforeExecutionOutputsTaskExecuter.execute(ResolveBeforeExecutionOutputsTaskExecuter.java:67)\r\n        at org.gradle.api.internal.tasks.execution.ResolveAfterPreviousExecutionStateTaskExecuter.execute(ResolveAfterPreviousExecutionStateTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:94)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:95)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:73)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:49)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:416)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:406)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:102)\r\n        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:49)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:43)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:355)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:343)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:336)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:322)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker$1.execute(DefaultPlanExecutor.java:134)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker$1.execute(DefaultPlanExecutor.java:129)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:202)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:193)\r\n        at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:129)\r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\nCaused by: org.gradle.api.file.DuplicateFileCopyingException: Encountered duplicate path \"testZip1.zip\" during copy operation configured with DuplicatesStrategy.FAIL\r\n        at org.gradle.api.internal.file.copy.DuplicateHandlingCopyActionDecorator$1$1.processFile(DuplicateHandlingCopyActionDecorator.java:53)\r\n        at org.gradle.api.internal.file.copy.CopyFileVisitorImpl.processFile(CopyFileVisitorImpl.java:62)\r\n        at org.gradle.api.internal.file.copy.CopyFileVisitorImpl.visitFile(CopyFileVisitorImpl.java:46)\r\n        at org.gradle.api.internal.file.collections.AbstractSingletonFileTree.visit(AbstractSingletonFileTree.java:36)\r\n        at org.gradle.api.internal.file.collections.FileTreeAdapter.visit(FileTreeAdapter.java:118)\r\n        at org.gradle.api.internal.file.CompositeFileTree.visit(CompositeFileTree.java:93)\r\n        at org.gradle.api.internal.file.copy.CopySpecActionImpl.execute(CopySpecActionImpl.java:39)\r\n        at org.gradle.api.internal.file.copy.CopySpecActionImpl.execute(CopySpecActionImpl.java:24)\r\n        at org.gradle.api.internal.file.copy.DefaultCopySpec$DefaultCopySpecResolver.walk(DefaultCopySpec.java:693)\r\n        at org.gradle.api.internal.file.copy.DefaultCopySpec$DefaultCopySpecResolver.walk(DefaultCopySpec.java:695)\r\n        at org.gradle.api.internal.file.copy.DefaultCopySpec.walk(DefaultCopySpec.java:499)\r\n        at org.gradle.api.internal.file.copy.CopySpecBackedCopyActionProcessingStream.process(CopySpecBackedCopyActionProcessingStream.java:38)\r\n        at org.gradle.api.internal.file.copy.DuplicateHandlingCopyActionDecorator$1.process(DuplicateHandlingCopyActionDecorator.java:44)\r\n        at org.gradle.api.internal.file.copy.NormalizingCopyActionDecorator$1.process(NormalizingCopyActionDecorator.java:57)\r\n        at org.gradle.api.internal.file.archive.ZipCopyAction$1.execute(ZipCopyAction.java:85)\r\n        at org.gradle.api.internal.file.archive.ZipCopyAction$1.execute(ZipCopyAction.java:83)\r\n        at org.gradle.internal.IoActions.withResource(IoActions.java:77)\r\n        at org.gradle.api.internal.file.archive.ZipCopyAction.execute(ZipCopyAction.java:83)\r\n        at org.gradle.api.internal.file.copy.NormalizingCopyActionDecorator.execute(NormalizingCopyActionDecorator.java:53)\r\n        at org.gradle.api.internal.file.copy.DuplicateHandlingCopyActionDecorator.execute(DuplicateHandlingCopyActionDecorator.java:42)\r\n        at org.gradle.api.internal.file.copy.CopyActionExecuter.execute(CopyActionExecuter.java:40)\r\n        at org.gradle.api.tasks.AbstractCopyTask.copy(AbstractCopyTask.java:179)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:103)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:48)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:41)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:28)\r\n        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:702)\r\n        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:669)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$5.run(ExecuteActionsTaskExecuter.java:404)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:402)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:394)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor$1.execute(DefaultBuildOperationExecutor.java:165)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:250)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:158)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:92)\r\n        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:393)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:376)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$200(ExecuteActionsTaskExecuter.java:80)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:213)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.lambda$execute$1(ExecuteStep.java:33)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:33)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:26)\r\n        at org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:58)\r\n        at org.gradle.internal.execution.steps.CleanupOutputsStep.execute(CleanupOutputsStep.java:35)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:33)\r\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:39)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:73)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:54)\r\n        at org.gradle.internal.execution.steps.CatchExceptionStep.execute(CatchExceptionStep.java:35)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\r\n        at org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:45)\r\n        at org.gradle.internal.execution.steps.SnapshotOutputsStep.execute(SnapshotOutputsStep.java:31)\r\n        at org.gradle.internal.execution.steps.CacheStep.executeWithoutCache(CacheStep.java:201)\r\n        at org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:70)\r\n        at org.gradle.internal.execution.steps.CacheStep.execute(CacheStep.java:45)\r\n        at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:49)\r\n        at org.gradle.internal.execution.steps.StoreSnapshotsStep.execute(StoreSnapshotsStep.java:43)\r\n        at org.gradle.internal.execution.steps.StoreSnapshotsStep.execute(StoreSnapshotsStep.java:32)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:38)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:24)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:96)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:89)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:54)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:77)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:37)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:36)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:26)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:90)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:48)\r\n        at org.gradle.internal.execution.impl.DefaultWorkExecutor.execute(DefaultWorkExecutor.java:33)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:120)\r\n        ... 35 more\r\n\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 0s\r\n3 actionable tasks: 1 executed, 2 up-to-date\r\n```",
        "created_at": "2019-04-24T21:37:57Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486437046",
        "id": 486437046,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQzNzA0Ng==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486437046/reactions"
        },
        "updated_at": "2019-04-24T21:42:29Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486437046",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "NONE",
        "body": "the zip subclass is there to provide needed laziness in a way that works with both Gradle 4.10 and 5.1+. take a look:\r\nhttps://github.com/DexPatcher/dexpatcher-gradle/blob/v2/src/main/groovy/lanchon/dexpatcher/gradle/tasks/LazyZipTask.groovy\r\n\r\nobviously i need to replace the `@OutputFile` annotation with `@Internal` and programmaticaly register `getArchivePath()` as output file only if running on Gradle < 5.1 so as to not break the task.\r\n\r\nhow do i go about reproducing the functionality of the `@OutputFile` annotation in code?\r\n\r\nthanks!",
        "created_at": "2019-04-24T21:52:39Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486441629",
        "id": 486441629,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQ0MTYyOQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486441629/reactions"
        },
        "updated_at": "2019-04-24T21:52:39Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486441629",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "You don't need the annotation.  The output file annotation exists on `AbstractArchiveTask#getArchiveFile()`.  By adding it back to `getArchivePath`, you're saying there are _two_ outputs to the Zip task and that's why you're getting duplicates (they both point to the same file).\r\n\r\nI'm not sure you need the custom Zip task at all. If you continued to use the old API, I think things would have still worked.  Extending the Zip task or using convention mapping is what causes https://github.com/gradle/gradle/issues/8401",
        "created_at": "2019-04-24T22:13:10Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486447548",
        "id": 486447548,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQ0NzU0OA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486447548/reactions"
        },
        "updated_at": "2019-04-24T22:13:10Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486447548",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/5387972?v=4",
            "events_url": "https://api.github.com/users/big-guy/events{/privacy}",
            "followers_url": "https://api.github.com/users/big-guy/followers",
            "following_url": "https://api.github.com/users/big-guy/following{/other_user}",
            "gists_url": "https://api.github.com/users/big-guy/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/big-guy",
            "id": 5387972,
            "login": "big-guy",
            "node_id": "MDQ6VXNlcjUzODc5NzI=",
            "organizations_url": "https://api.github.com/users/big-guy/orgs",
            "received_events_url": "https://api.github.com/users/big-guy/received_events",
            "repos_url": "https://api.github.com/users/big-guy/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/big-guy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/big-guy/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/big-guy"
        }
    },
    {
        "author_association": "NONE",
        "body": "for future tasks you might convert to the lazy API, it looks like the only way to provide forward and backward compatibility involving subclassing is to blacklist old fields through some mechanism that is not annotations, instead of simply changing the annotations.\r\n\r\neven so, if somebody subclassed a task, purposely removing a property annotation and exposed its content through some other new annotated property, you again got a failure. so a blacklist is not foolproof.",
        "created_at": "2019-04-24T22:13:48Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486447754",
        "id": 486447754,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQ0Nzc1NA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486447754/reactions"
        },
        "updated_at": "2019-04-24T22:13:48Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486447754",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "NONE",
        "body": "> You don't need the annotation\r\n\r\nyes i need it. `AbstractArchiveTask#getArchiveFile()` does not exist in Gradle <5.1. the whole point of subclassing Zip is, again, to provide needed laziness in a way that works with both Gradle 4.10 and 5.1+.\r\n\r\n> I'm not sure you need the custom Zip task at all. If you continued to use the old API, I think things would have still worked.\r\n\r\nthe <5.1 zip api never worked for me, i needed laziness from the get go. so i subclassed the getters in 4.10 and everything was fine. when you converted the zip class to lazy in 5.1 you broke compatibility with users who subclassed. this is a well-known reported issue: #8401\r\n\r\nso to work around the breakage in 5.1, and keep laziness AND compatibility with 4.10 and 5.1, i needed the contraption linked here:\r\nhttps://github.com/DexPatcher/dexpatcher-gradle/blob/v2/src/main/groovy/lanchon/dexpatcher/gradle/tasks/LazyZipTask.groovy\r\n\r\nthis works around the reported breakage. **but there is a new breakage: the removal of annotations and its effect on subclassing.**\r\n\r\nthis has not been reported so far. Gradle developers need to be aware of this: this issue goes beyond the data wiring issues reported in #8401, they are breaking existing code in a way they are not currently aware by removing annotations when they convert API to lazy. \r\n\r\ni've done my part tracking this down. i recommend you create a new issue regarding this to alert your developers.",
        "created_at": "2019-04-24T22:33:38Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486452808",
        "id": 486452808,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQ1MjgwOA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486452808/reactions"
        },
        "updated_at": "2019-04-24T22:33:38Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486452808",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "NONE",
        "body": "in essence, this is simple: you can't change annotations of non-final methods. if you do you are breaking backwards compatibility.\r\n\r\nif your devs are going to do it anyway, they should be aware of the implications.",
        "created_at": "2019-04-24T22:42:22Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486454776",
        "id": 486454776,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQ1NDc3Ng==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486454776/reactions"
        },
        "updated_at": "2019-04-24T22:42:22Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486454776",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    },
    {
        "author_association": "NONE",
        "body": "i fixed the workaround with this commit:\r\nhttps://github.com/DexPatcher/dexpatcher-gradle/commit/4d1e1253146e80a18b6dd9b4f1054501ccea5a77",
        "created_at": "2019-04-24T23:55:47Z",
        "html_url": "https://github.com/gradle/gradle/issues/9204#issuecomment-486469283",
        "id": 486469283,
        "issue_url": "https://api.github.com/repos/gradle/gradle/issues/9204",
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQ2OTI4Mw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486469283/reactions"
        },
        "updated_at": "2019-04-24T23:55:47Z",
        "url": "https://api.github.com/repos/gradle/gradle/issues/comments/486469283",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/3977813?v=4",
            "events_url": "https://api.github.com/users/Lanchon/events{/privacy}",
            "followers_url": "https://api.github.com/users/Lanchon/followers",
            "following_url": "https://api.github.com/users/Lanchon/following{/other_user}",
            "gists_url": "https://api.github.com/users/Lanchon/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Lanchon",
            "id": 3977813,
            "login": "Lanchon",
            "node_id": "MDQ6VXNlcjM5Nzc4MTM=",
            "organizations_url": "https://api.github.com/users/Lanchon/orgs",
            "received_events_url": "https://api.github.com/users/Lanchon/received_events",
            "repos_url": "https://api.github.com/users/Lanchon/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Lanchon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Lanchon/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Lanchon"
        }
    }
]