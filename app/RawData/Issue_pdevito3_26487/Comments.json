[
    {
        "author_association": "NONE",
        "body": "Realized I forgot to tag you guys for continuity. \n\n@Tratcher \n@davidfowl \n@anurse\n",
        "created_at": "2020-10-02T15:24:02Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-702797551",
        "id": 702797551,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjc5NzU1MQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/702797551/reactions"
        },
        "updated_at": "2020-10-02T15:24:02Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/702797551",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/24260530?v=4",
            "events_url": "https://api.github.com/users/pdevito3/events{/privacy}",
            "followers_url": "https://api.github.com/users/pdevito3/followers",
            "following_url": "https://api.github.com/users/pdevito3/following{/other_user}",
            "gists_url": "https://api.github.com/users/pdevito3/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/pdevito3",
            "id": 24260530,
            "login": "pdevito3",
            "node_id": "MDQ6VXNlcjI0MjYwNTMw",
            "organizations_url": "https://api.github.com/users/pdevito3/orgs",
            "received_events_url": "https://api.github.com/users/pdevito3/received_events",
            "repos_url": "https://api.github.com/users/pdevito3/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/pdevito3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pdevito3/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/pdevito3"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "I'm confused by your base assertion here that Startup is running twice. That's not what the comments in the linked issue say.\r\n\r\nYou have multiple ConfigureServices methods and one runs after the other, but no single ConfigureServices method is being run twice, correct?",
        "created_at": "2020-10-02T17:02:12Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-702847225",
        "id": 702847225,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjg0NzIyNQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/702847225/reactions"
        },
        "updated_at": "2020-10-02T17:02:12Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/702847225",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1821173?v=4",
            "events_url": "https://api.github.com/users/Tratcher/events{/privacy}",
            "followers_url": "https://api.github.com/users/Tratcher/followers",
            "following_url": "https://api.github.com/users/Tratcher/following{/other_user}",
            "gists_url": "https://api.github.com/users/Tratcher/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Tratcher",
            "id": 1821173,
            "login": "Tratcher",
            "node_id": "MDQ6VXNlcjE4MjExNzM=",
            "organizations_url": "https://api.github.com/users/Tratcher/orgs",
            "received_events_url": "https://api.github.com/users/Tratcher/received_events",
            "repos_url": "https://api.github.com/users/Tratcher/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Tratcher/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Tratcher/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Tratcher"
        }
    },
    {
        "author_association": "NONE",
        "body": "@Tratcher yeah, let me try to clarify. \r\n\r\nIn this instance and the linked instance, my code runs fine when doing a normal startup, but when running integration tests, it would seem that the entire ConfigureServices method is running twice, i.e. if I put a breakpoint on, any line in the `AddIdentityInfrastructure` method, it will get hit twice when running `WebApplicationFactory`.\r\n\r\nMaybe I'm missing something with the proper configuration and operation of setting up integration tests, but even if that's the case, it isn't very intuitive as is. My point for the feature request is that, it would be great if we could have an alternative setup to just call a separate startup (e.g. StartupTesting) and call it a day. Simple and easy. No need to override anything in another startup and potentially run things multiple times.",
        "created_at": "2020-10-05T12:51:38Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-703611001",
        "id": 703611001,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzYxMTAwMQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/703611001/reactions"
        },
        "updated_at": "2020-10-05T12:51:38Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/703611001",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/24260530?v=4",
            "events_url": "https://api.github.com/users/pdevito3/events{/privacy}",
            "followers_url": "https://api.github.com/users/pdevito3/followers",
            "following_url": "https://api.github.com/users/pdevito3/following{/other_user}",
            "gists_url": "https://api.github.com/users/pdevito3/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/pdevito3",
            "id": 24260530,
            "login": "pdevito3",
            "node_id": "MDQ6VXNlcjI0MjYwNTMw",
            "organizations_url": "https://api.github.com/users/pdevito3/orgs",
            "received_events_url": "https://api.github.com/users/pdevito3/received_events",
            "repos_url": "https://api.github.com/users/pdevito3/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/pdevito3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pdevito3/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/pdevito3"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "Ok, we'll have to investigate that, it shouldn't run twice.\r\n\r\nOn another note, _never_ call BuildServiceProvider, it messes up the DI service lifetimes. That DB initialization needs to happen later after the host/container get built.",
        "created_at": "2020-10-05T15:44:14Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-703716683",
        "id": 703716683,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzcxNjY4Mw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 3,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 3,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/703716683/reactions"
        },
        "updated_at": "2020-10-05T15:44:14Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/703716683",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1821173?v=4",
            "events_url": "https://api.github.com/users/Tratcher/events{/privacy}",
            "followers_url": "https://api.github.com/users/Tratcher/followers",
            "following_url": "https://api.github.com/users/Tratcher/following{/other_user}",
            "gists_url": "https://api.github.com/users/Tratcher/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Tratcher",
            "id": 1821173,
            "login": "Tratcher",
            "node_id": "MDQ6VXNlcjE4MjExNzM=",
            "organizations_url": "https://api.github.com/users/Tratcher/orgs",
            "received_events_url": "https://api.github.com/users/Tratcher/received_events",
            "repos_url": "https://api.github.com/users/Tratcher/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Tratcher/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Tratcher/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Tratcher"
        }
    },
    {
        "author_association": "NONE",
        "body": "Thanks, [here's](https://github.com/pdevito3/temp-vet) an example repo if you want to check out the bug in action.\r\n\r\nGood tip, I'll be sure to update the BuildServiceProvider code. For what it's worth, the factory is based on [eShopWeb](https://github.com/dotnet-architecture/eShopOnWeb/blob/fa8839e1d8d2ce7918b8d09179a0889fe728a582/tests/FunctionalTests/Web/WebTestFixture.cs), so a lot of people are probably getting bad info here. Maybe another good example that setting up the factory can be hard to wrap your head around for much of the community and having an option to have it work from a standard startup would be beneficial. \r\n\r\n",
        "created_at": "2020-10-06T02:14:08Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-703987216",
        "id": 703987216,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzk4NzIxNg==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/703987216/reactions"
        },
        "updated_at": "2020-10-06T02:14:08Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/703987216",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/24260530?v=4",
            "events_url": "https://api.github.com/users/pdevito3/events{/privacy}",
            "followers_url": "https://api.github.com/users/pdevito3/followers",
            "following_url": "https://api.github.com/users/pdevito3/following{/other_user}",
            "gists_url": "https://api.github.com/users/pdevito3/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/pdevito3",
            "id": 24260530,
            "login": "pdevito3",
            "node_id": "MDQ6VXNlcjI0MjYwNTMw",
            "organizations_url": "https://api.github.com/users/pdevito3/orgs",
            "received_events_url": "https://api.github.com/users/pdevito3/received_events",
            "repos_url": "https://api.github.com/users/pdevito3/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/pdevito3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pdevito3/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/pdevito3"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "Thanks for the warning, I've filed https://github.com/dotnet-architecture/eShopOnWeb/issues/465 to clean up the sample.",
        "created_at": "2020-10-06T15:33:27Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-704355006",
        "id": 704355006,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDM1NTAwNg==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/704355006/reactions"
        },
        "updated_at": "2020-10-06T15:33:27Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/704355006",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1821173?v=4",
            "events_url": "https://api.github.com/users/Tratcher/events{/privacy}",
            "followers_url": "https://api.github.com/users/Tratcher/followers",
            "following_url": "https://api.github.com/users/Tratcher/following{/other_user}",
            "gists_url": "https://api.github.com/users/Tratcher/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Tratcher",
            "id": 1821173,
            "login": "Tratcher",
            "node_id": "MDQ6VXNlcjE4MjExNzM=",
            "organizations_url": "https://api.github.com/users/Tratcher/orgs",
            "received_events_url": "https://api.github.com/users/Tratcher/received_events",
            "repos_url": "https://api.github.com/users/Tratcher/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Tratcher/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Tratcher/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Tratcher"
        }
    },
    {
        "author_association": "NONE",
        "body": "Thanks, will be sure to update this if I come across any other instances. ",
        "created_at": "2020-10-06T15:41:13Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-704360193",
        "id": 704360193,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDM2MDE5Mw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/704360193/reactions"
        },
        "updated_at": "2020-10-06T15:41:13Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/704360193",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/24260530?v=4",
            "events_url": "https://api.github.com/users/pdevito3/events{/privacy}",
            "followers_url": "https://api.github.com/users/pdevito3/followers",
            "following_url": "https://api.github.com/users/pdevito3/following{/other_user}",
            "gists_url": "https://api.github.com/users/pdevito3/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/pdevito3",
            "id": 24260530,
            "login": "pdevito3",
            "node_id": "MDQ6VXNlcjI0MjYwNTMw",
            "organizations_url": "https://api.github.com/users/pdevito3/orgs",
            "received_events_url": "https://api.github.com/users/pdevito3/received_events",
            "repos_url": "https://api.github.com/users/pdevito3/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/pdevito3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pdevito3/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/pdevito3"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "This issue has been resolved and has not had any activity for **1 day**. It will be closed for housekeeping purposes.\n\nSee [our Issue Management Policies](https://aka.ms/aspnet/issue-policies) for more information.",
        "created_at": "2020-10-07T17:00:53Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-705069151",
        "id": 705069151,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTA2OTE1MQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/705069151/reactions"
        },
        "updated_at": "2020-10-07T17:00:53Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/705069151",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
            "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
            "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/apps/msftbot",
            "id": 48340428,
            "login": "msftbot[bot]",
            "node_id": "MDM6Qm90NDgzNDA0Mjg=",
            "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
            "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
            "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
            "type": "Bot",
            "url": "https://api.github.com/users/msftbot%5Bbot%5D"
        }
    },
    {
        "author_association": "MEMBER",
        "body": "@mkArtakMSFT this isn't resolved. https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-703611001 still needs investigation.",
        "created_at": "2020-10-07T17:13:47Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-705076358",
        "id": 705076358,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTA3NjM1OA==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/705076358/reactions"
        },
        "updated_at": "2020-10-07T17:14:26Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/705076358",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1821173?v=4",
            "events_url": "https://api.github.com/users/Tratcher/events{/privacy}",
            "followers_url": "https://api.github.com/users/Tratcher/followers",
            "following_url": "https://api.github.com/users/Tratcher/following{/other_user}",
            "gists_url": "https://api.github.com/users/Tratcher/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Tratcher",
            "id": 1821173,
            "login": "Tratcher",
            "node_id": "MDQ6VXNlcjE4MjExNzM=",
            "organizations_url": "https://api.github.com/users/Tratcher/orgs",
            "received_events_url": "https://api.github.com/users/Tratcher/received_events",
            "repos_url": "https://api.github.com/users/Tratcher/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Tratcher/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Tratcher/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Tratcher"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "Thanks for contacting us.\nWe're moving this issue to the `Next sprint planning` milestone for future evaluation / consideration. We will evaluate the request when we are planning the work for the next milestone. To learn more about what to expect next and how this issue will be handled you can read more about our triage process [here](https://github.com/dotnet/aspnetcore/blob/master/docs/TriageProcess.md).",
        "created_at": "2020-10-08T17:00:50Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-705700701",
        "id": 705700701,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTcwMDcwMQ==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/705700701/reactions"
        },
        "updated_at": "2020-10-08T17:00:50Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/705700701",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
            "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
            "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/apps/msftbot",
            "id": 48340428,
            "login": "msftbot[bot]",
            "node_id": "MDM6Qm90NDgzNDA0Mjg=",
            "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
            "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
            "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
            "type": "Bot",
            "url": "https://api.github.com/users/msftbot%5Bbot%5D"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "We've moved this issue to the Backlog milestone. This means that it is not going to be worked on for the coming release. We will reassess the backlog following the current release and consider this item at that time. To learn more about our issue management process and to have better expectation regarding different types of issues you can read our [Triage Process](https://github.com/dotnet/aspnetcore/blob/master/docs/TriageProcess.md).",
        "created_at": "2020-10-09T17:46:20Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-706317937",
        "id": 706317937,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjMxNzkzNw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 0,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/706317937/reactions"
        },
        "updated_at": "2020-10-09T17:46:20Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/706317937",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
            "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
            "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/apps/msftbot",
            "id": 48340428,
            "login": "msftbot[bot]",
            "node_id": "MDM6Qm90NDgzNDA0Mjg=",
            "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
            "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
            "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
            "type": "Bot",
            "url": "https://api.github.com/users/msftbot%5Bbot%5D"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "All I want from `WebApplicationFactory` is:\r\n\r\n1. Add some services **before** `Startup.ConfigureServices`.\r\n2. `Startup.ConfigureServices` is called only once.\r\n\r\nI upgraded to .NET 5 and am now also seeing `Startup.ConfigureServices` called twice. I was using a `TestStartup` class inheriting from `Startup` to be able to override the `ConfigureServices` method and achieve Number 1 above which was working nicely. Changes to the `WebApplicationFactory` API has broken my code in every upgrade of .NET unfortunately. I don't really care how but is it possible to achieve the above two requirements?",
        "created_at": "2020-11-20T12:15:40Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-731136043",
        "id": 731136043,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDczMTEzNjA0Mw==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 7,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 7,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/731136043/reactions"
        },
        "updated_at": "2020-11-20T12:16:11Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/731136043",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/2270364?v=4",
            "events_url": "https://api.github.com/users/RehanSaeed/events{/privacy}",
            "followers_url": "https://api.github.com/users/RehanSaeed/followers",
            "following_url": "https://api.github.com/users/RehanSaeed/following{/other_user}",
            "gists_url": "https://api.github.com/users/RehanSaeed/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/RehanSaeed",
            "id": 2270364,
            "login": "RehanSaeed",
            "node_id": "MDQ6VXNlcjIyNzAzNjQ=",
            "organizations_url": "https://api.github.com/users/RehanSaeed/orgs",
            "received_events_url": "https://api.github.com/users/RehanSaeed/received_events",
            "repos_url": "https://api.github.com/users/RehanSaeed/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/RehanSaeed/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RehanSaeed/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/RehanSaeed"
        }
    },
    {
        "author_association": "CONTRIBUTOR",
        "body": "I am having the exact same problem as @RehanSaeed I would expect if you override ConfigureWebHost in WebApplicationFactory and set UseStartup to a TestStartup class that the SUT Startup would not have ConfigureServices called as normal.",
        "created_at": "2020-11-20T15:41:31Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-731242982",
        "id": 731242982,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "MDEyOklzc3VlQ29tbWVudDczMTI0Mjk4Mg==",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 5,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 5,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/731242982/reactions"
        },
        "updated_at": "2020-11-20T15:41:31Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/731242982",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/2934507?v=4",
            "events_url": "https://api.github.com/users/VictorioBerra/events{/privacy}",
            "followers_url": "https://api.github.com/users/VictorioBerra/followers",
            "following_url": "https://api.github.com/users/VictorioBerra/following{/other_user}",
            "gists_url": "https://api.github.com/users/VictorioBerra/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/VictorioBerra",
            "id": 2934507,
            "login": "VictorioBerra",
            "node_id": "MDQ6VXNlcjI5MzQ1MDc=",
            "organizations_url": "https://api.github.com/users/VictorioBerra/orgs",
            "received_events_url": "https://api.github.com/users/VictorioBerra/received_events",
            "repos_url": "https://api.github.com/users/VictorioBerra/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/VictorioBerra/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/VictorioBerra/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/VictorioBerra"
        }
    },
    {
        "author_association": "NONE",
        "body": "Any updates on this?",
        "created_at": "2022-07-15T13:06:46Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-1185527363",
        "id": 1185527363,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "IC_kwDOAQzde85GqbZD",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 1,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/1185527363/reactions"
        },
        "updated_at": "2022-07-15T13:06:46Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/1185527363",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/80816144?v=4",
            "events_url": "https://api.github.com/users/ani-im/events{/privacy}",
            "followers_url": "https://api.github.com/users/ani-im/followers",
            "following_url": "https://api.github.com/users/ani-im/following{/other_user}",
            "gists_url": "https://api.github.com/users/ani-im/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/ani-im",
            "id": 80816144,
            "login": "ani-im",
            "node_id": "MDQ6VXNlcjgwODE2MTQ0",
            "organizations_url": "https://api.github.com/users/ani-im/orgs",
            "received_events_url": "https://api.github.com/users/ani-im/received_events",
            "repos_url": "https://api.github.com/users/ani-im/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/ani-im/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ani-im/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/ani-im"
        }
    },
    {
        "author_association": "NONE",
        "body": "It seems like the issue is still there, are there known workarounds?",
        "created_at": "2022-09-20T14:00:16Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-1252398658",
        "id": 1252398658,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "IC_kwDOAQzde85KphZC",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 0,
            "-1": 0,
            "confused": 1,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/1252398658/reactions"
        },
        "updated_at": "2022-09-20T14:00:16Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/1252398658",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/32089114?v=4",
            "events_url": "https://api.github.com/users/Belgian-Coder/events{/privacy}",
            "followers_url": "https://api.github.com/users/Belgian-Coder/followers",
            "following_url": "https://api.github.com/users/Belgian-Coder/following{/other_user}",
            "gists_url": "https://api.github.com/users/Belgian-Coder/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Belgian-Coder",
            "id": 32089114,
            "login": "Belgian-Coder",
            "node_id": "MDQ6VXNlcjMyMDg5MTE0",
            "organizations_url": "https://api.github.com/users/Belgian-Coder/orgs",
            "received_events_url": "https://api.github.com/users/Belgian-Coder/received_events",
            "repos_url": "https://api.github.com/users/Belgian-Coder/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Belgian-Coder/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Belgian-Coder/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Belgian-Coder"
        }
    },
    {
        "author_association": "NONE",
        "body": "I doubt this is the reason for the problem mentioned in the original post, but in case anybody stumbles on this seeing the behavior I saw: I saw the Program code in a .NET 6 app getting executed twice because I had a `WebApplicationFactory` whose code references `this.Server` (as in `clientBuilder.ConfigurePrimaryHttpMessageHandler(() => this.Server.CreateHandler())`), but my tests applied further customizations via `WithWebHostBuilder()`, which provides a different _instance_ of WebApplicationFactory. The call to `this.Server` caused the wrapped factory instance to spin up its own host. Changing that to `clientBuilder.ConfigurePrimaryHttpMessageHandler(services => ((TestServer)services.GetRequiredService<IServer>()).CreateHandler())` fixed that problem.",
        "created_at": "2023-01-27T22:41:05Z",
        "html_url": "https://github.com/dotnet/aspnetcore/issues/26487#issuecomment-1407158317",
        "id": 1407158317,
        "issue_url": "https://api.github.com/repos/dotnet/aspnetcore/issues/26487",
        "node_id": "IC_kwDOAQzde85T34gt",
        "performed_via_github_app": null,
        "reactions": {
            "+1": 1,
            "-1": 0,
            "confused": 0,
            "eyes": 0,
            "heart": 0,
            "hooray": 0,
            "laugh": 0,
            "rocket": 0,
            "total_count": 1,
            "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/1407158317/reactions"
        },
        "updated_at": "2023-01-27T22:41:05Z",
        "url": "https://api.github.com/repos/dotnet/aspnetcore/issues/comments/1407158317",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/453495?v=4",
            "events_url": "https://api.github.com/users/j2jensen/events{/privacy}",
            "followers_url": "https://api.github.com/users/j2jensen/followers",
            "following_url": "https://api.github.com/users/j2jensen/following{/other_user}",
            "gists_url": "https://api.github.com/users/j2jensen/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/j2jensen",
            "id": 453495,
            "login": "j2jensen",
            "node_id": "MDQ6VXNlcjQ1MzQ5NQ==",
            "organizations_url": "https://api.github.com/users/j2jensen/orgs",
            "received_events_url": "https://api.github.com/users/j2jensen/received_events",
            "repos_url": "https://api.github.com/users/j2jensen/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/j2jensen/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/j2jensen/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/j2jensen"
        }
    }
]