{
    "active_lock_reason": "too heated",
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I know CSS variables has already been discussed (#26596) and I saw this reply\r\nhttps://github.com/twbs/bootstrap/issues/26596#issuecomment-403342215 \r\n\r\nSo I come with a proposal which not requires heavy refactoring \r\n\r\n## Proposal\r\n\r\nInstead of using directly native functions like `darken` or `lighten` we should use wrappers\r\nEx : `try-darken`\r\n\r\n``` scss\r\n@function try-darken($color, $percent) {\r\n\r\n  @if (not $enable-variables){\r\n    @return darken($color, $percent);\r\n  }\r\n\r\n  @if str_slice(\"#{$color}\", 0, 3) == \"var\" {\r\n    $percent-str: \"#{$percent * 100}\";\r\n    $percent-value: str_slice($percent-str, 0, str_length($percent-str) - 1);\r\n    $original: str_slice($color, 7, str_length($color) - 1);\r\n    $variable: --#{$original}-darken-#{$percent-value};\r\n    @return var($variable);\r\n  }\r\n\r\n  @return darken($color, $percent);\r\n}\r\n```\r\nThis wrapper handles the variable construction and create shades of colors.\r\n\r\nThen we need to generate all shades of variables\r\n``` scss \r\n:root {\r\n  @if ($enable-variables){\r\n    @each $color, $value in $theme-colors-values {\r\n      --#{$color}: #{$value};\r\n      --#{$color}-yiq: #{color-yiq($value)};\r\n\r\n      @each $shade in $theme-colors-shades {\r\n        --#{$color}-darken-#{$shade * 100}: #{darken($value, $shade)};\r\n        --#{$color}-darken-#{$shade * 100}-yiq: #{color-yiq(darken($value, $shade))};\r\n        --#{$color}-lighten-#{$shade * 100}: #{lighten($value, $shade)};\r\n        --#{$color}-lighten-#{$shade * 100}-yiq: #{color-yiq(lighten($value, $shade))};\r\n      }\r\n    }\r\n  }\r\n  @else{\r\n    @each $color, $value in $theme-colors {\r\n      --#{$color}: #{$value};\r\n    }\r\n  }\r\n}\r\n```\r\nThis creates all necessary variables.\r\nAs you see, this requires to list all necessary shades, and concret theme color values \r\n\r\n``` scss \r\n$primary:    var(--primary) !default;\r\n$secondary:  var(--secondary) !default;\r\n$success:    var(--success) !default;\r\n$info:       var(--info) !default;\r\n$warning:    var(--warning) !default;\r\n$danger:     var(--danger) !default;\r\n$light:      var(--light) !default;\r\n$dark:       var(--dark) !default;\r\n\r\n$theme-colors-values: map-merge(\r\n  (\r\n    \"primary\":     $blue,\r\n    \"secondary\":   $gray-600,\r\n    \"success\":     $green,\r\n    \"info\":        $cyan,\r\n    \"warning\":     $yellow,\r\n    \"danger\":      $red,\r\n    \"light\":       $gray-100,\r\n    \"dark\":        $gray-800,\r\n  ),\r\n  $theme-colors-values\r\n);\r\n\r\n$theme-colors-shades: (7.5, 10, 12.5, 25, 35, 40) !default;\r\n```\r\n\r\nWith theses few tricks I managed to create all variables I needed for theme colors, and I can change it on the fly with few javascript\r\n\r\n## Demo\r\nHere is a demo site with an implementation \r\nhttps://felx-b.github.io/docs/4.3/getting-started/introduction/\r\nYou can change the primary color on fly in the nav bar\r\n\r\n## Source\r\nHere are the sources\r\nhttps://github.com/Felx-B/bootstrap-css-variable\r\n\r\n## Alternative\r\nIf the proposal is rejected, it would worth nothing to wrap native function calls (like `darken/lighten/mix` ...) into upper functions (`try-darken`, `try-lighten` ...) so we could override these behaviors to implement CSS variable ourselves.",
    "closed_at": "2019-04-26T15:30:44Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/98681?v=4",
        "events_url": "https://api.github.com/users/mdo/events{/privacy}",
        "followers_url": "https://api.github.com/users/mdo/followers",
        "following_url": "https://api.github.com/users/mdo/following{/other_user}",
        "gists_url": "https://api.github.com/users/mdo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mdo",
        "id": 98681,
        "login": "mdo",
        "node_id": "MDQ6VXNlcjk4Njgx",
        "organizations_url": "https://api.github.com/users/mdo/orgs",
        "received_events_url": "https://api.github.com/users/mdo/received_events",
        "repos_url": "https://api.github.com/users/mdo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mdo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mdo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mdo"
    },
    "comments": 8,
    "comments_url": "https://api.github.com/repos/twbs/bootstrap/issues/28688/comments",
    "created_at": "2019-04-25T11:42:07Z",
    "events_url": "https://api.github.com/repos/twbs/bootstrap/issues/28688/events",
    "html_url": "https://github.com/twbs/bootstrap/issues/28688",
    "id": 437154038,
    "labels": [
        {
            "color": "6f42c1",
            "default": false,
            "description": "",
            "id": 210556,
            "name": "css",
            "node_id": "MDU6TGFiZWwyMTA1NTY=",
            "url": "https://api.github.com/repos/twbs/bootstrap/labels/css"
        }
    ],
    "labels_url": "https://api.github.com/repos/twbs/bootstrap/issues/28688/labels{/name}",
    "locked": true,
    "milestone": null,
    "node_id": "MDU6SXNzdWU0MzcxNTQwMzg=",
    "number": 28688,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/twbs/bootstrap/issues/28688/reactions"
    },
    "repository_url": "https://api.github.com/repos/twbs/bootstrap",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/twbs/bootstrap/issues/28688/timeline",
    "title": "[Proposal] CSS Variables",
    "updated_at": "2019-04-29T06:38:35Z",
    "url": "https://api.github.com/repos/twbs/bootstrap/issues/28688",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/18530681?v=4",
        "events_url": "https://api.github.com/users/Felx-B/events{/privacy}",
        "followers_url": "https://api.github.com/users/Felx-B/followers",
        "following_url": "https://api.github.com/users/Felx-B/following{/other_user}",
        "gists_url": "https://api.github.com/users/Felx-B/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Felx-B",
        "id": 18530681,
        "login": "Felx-B",
        "node_id": "MDQ6VXNlcjE4NTMwNjgx",
        "organizations_url": "https://api.github.com/users/Felx-B/orgs",
        "received_events_url": "https://api.github.com/users/Felx-B/received_events",
        "repos_url": "https://api.github.com/users/Felx-B/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Felx-B/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Felx-B/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Felx-B"
    }
}