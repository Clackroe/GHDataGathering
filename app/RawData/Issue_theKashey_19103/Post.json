{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "React version:  16.13.1\r\n\r\n## Steps To Reproduce\r\n\r\n1. Wrap application with `StrictMode`\r\n2. use `useState`\r\n3. sometimes value would be reset to the initial\r\n\r\nLink to code example: https://codesandbox.io/s/react-stripe-js-z79qw?file=/src/index.js\r\n> There are two cases, one is not working in StrictMode and one works well. Without strick mode both works. Console output is empty.\r\n\r\nWe actually found the buggy behaviour in `stripe-js/react` - it uses `useState` to save the context value. \r\nAnd it is (not) working this way:\r\n- (render1) the `stripe` value set\r\n- (render1) `setContext` is called (https://github.com/stripe/react-stripe-js/blob/c97c0ee094605c1d6aa1528f740e7c784e2464a7/src/components/Elements.tsx#L135)\r\n- (render2) component rerendered with a correct state\r\n- (render3) component rerendered with incorrect state, equal to the initial one\r\n\r\nIn the same time: \r\n- data in \"refs\" is correct\r\n- using a bit different API (promises), moving `setContext` update into nested component, is working as well. (https://github.com/stripe/react-stripe-js/blob/c97c0ee094605c1d6aa1528f740e7c784e2464a7/src/components/Elements.tsx#L148)\r\n\r\n## The current behavior\r\n\r\nI've failed to understand the current behavior - there is a case (we know one) when state is reset, while there are many cases where everything is working as expected.\r\n\r\n## The expected behavior\r\n\r\nState should be always preserved; StrictMode should have to effect on hooks.",
    "closed_at": "2020-06-09T11:08:08Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/582410?v=4",
        "events_url": "https://api.github.com/users/theKashey/events{/privacy}",
        "followers_url": "https://api.github.com/users/theKashey/followers",
        "following_url": "https://api.github.com/users/theKashey/following{/other_user}",
        "gists_url": "https://api.github.com/users/theKashey/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/theKashey",
        "id": 582410,
        "login": "theKashey",
        "node_id": "MDQ6VXNlcjU4MjQxMA==",
        "organizations_url": "https://api.github.com/users/theKashey/orgs",
        "received_events_url": "https://api.github.com/users/theKashey/received_events",
        "repos_url": "https://api.github.com/users/theKashey/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/theKashey/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/theKashey/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/theKashey"
    },
    "comments": 10,
    "comments_url": "https://api.github.com/repos/facebook/react/issues/19103/comments",
    "created_at": "2020-06-09T06:16:43Z",
    "events_url": "https://api.github.com/repos/facebook/react/issues/19103/events",
    "html_url": "https://github.com/facebook/react/issues/19103",
    "id": 635143260,
    "labels": [
        {
            "color": "d4c5f9",
            "default": false,
            "description": "A potential issue that we haven't yet confirmed as a bug",
            "id": 155984160,
            "name": "Status: Unconfirmed",
            "node_id": "MDU6TGFiZWwxNTU5ODQxNjA=",
            "url": "https://api.github.com/repos/facebook/react/labels/Status:%20Unconfirmed"
        }
    ],
    "labels_url": "https://api.github.com/repos/facebook/react/issues/19103/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2MzUxNDMyNjA=",
    "number": 19103,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/facebook/react/issues/19103/reactions"
    },
    "repository_url": "https://api.github.com/repos/facebook/react",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/facebook/react/issues/19103/timeline",
    "title": "Bug: state could be reset into the initialValue when using StrictMode",
    "updated_at": "2020-06-09T11:08:08Z",
    "url": "https://api.github.com/repos/facebook/react/issues/19103",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/582410?v=4",
        "events_url": "https://api.github.com/users/theKashey/events{/privacy}",
        "followers_url": "https://api.github.com/users/theKashey/followers",
        "following_url": "https://api.github.com/users/theKashey/following{/other_user}",
        "gists_url": "https://api.github.com/users/theKashey/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/theKashey",
        "id": 582410,
        "login": "theKashey",
        "node_id": "MDQ6VXNlcjU4MjQxMA==",
        "organizations_url": "https://api.github.com/users/theKashey/orgs",
        "received_events_url": "https://api.github.com/users/theKashey/received_events",
        "repos_url": "https://api.github.com/users/theKashey/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/theKashey/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/theKashey/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/theKashey"
    }
}