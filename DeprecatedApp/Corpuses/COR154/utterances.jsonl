{"id": "ROOT", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "ROOT", "timestamp": "2019-07-24T09:27:51Z", "text": "Crash on Android 6.0 Xiaomi devices after release on PlayStore **Canonical issue: https://issuetracker.google.com/issues/147096055**\r -----\r \r I have launched my app in playstore, but i have found so many crash after the app is opened.\r And according my data on playstore, all crash happened in android 6.0. \r I have tried to testing in debug and released mode and everything is work. So this is strange for me.\r So this crash decreases my rating on playstore. Flutter team please help me.\r \r This is my data\r \r <img width=\"968\" alt=\"Screen Shot 2019-07-24 at 16 24 59\" src=\"https://user-images.githubusercontent.com/32892647/61782084-a8312600-ae2f-11e9-9cb3-827072e6c436.png\">\r \r This is error messages:\r <img width=\"973\" alt=\"Screen Shot 2019-07-24 at 16 25 14\" src=\"https://user-images.githubusercontent.com/32892647/61782106-b121f780-ae2f-11e9-9b92-72d1e52e0847.png\">\r \r And this is the log while app crash\r \r > 07-24 15:58:02.066 377-386/? E/cutils: Failed to openat(/storage/0403-0201): Permission denied\r 07-24 15:58:02.071 377-386/? E/cutils: Failed to openat(/storage/0403-0201): Permission denied\r 07-24 15:58:02.161 11382-11382/? A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x8 in tid 11382 (pkarir.topkarir)\r 07-24 15:58:02.214 520-520/? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\r 07-24 15:58:02.215 520-520/? A/DEBUG: Build fingerprint: 'Xiaomi/helium/helium:6.0.1/MMB29M/V7.3.14.0.MBDCNDE:user/release-keys'\r 07-24 15:58:02.215 520-520/? A/DEBUG: Revision: '0'\r 07-24 15:58:02.215 520-520/? A/DEBUG: ABI: 'arm64'\r 07-24 15:58:02.215 520-520/? A/DEBUG: pid: 11382, tid: 11382, name: pkarir.topkarir  >>> com.topkarir.topkarir <<<\r 07-24 15:58:02.215 520-520/? A/DEBUG: signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x8\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x0   0000007fed6aefd8  x1   0000007f7a03453f  x2   0000000000000006  x3   0000000000007472\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x4   0000000000000000  x5   0000000000000001  x6   00000055b4fca658  x7   0000007f7a034539\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x8   0000000000000021  x9   00000055b4fca640  x10  0000000051511100  x11  0000000000000033\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x12  0000007f94d5ba70  x13  00000055b4fca660  x14  00000055b4fca650  x15  000000000000af60\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x16  0000007f7a7afa78  x17  0000007f94cc5c08  x18  c000000000000000  x19  0000007fed6af178\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x20  0000007fed6af180  x21  0000007fed6af190  x22  0000000000000000  x23  0000007fed6aefd8\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x24  0000007f7a7c00d0  x25  0000000000000008  x26  0000000012c59080  x27  0000000071584b40\r 07-24 15:58:02.224 520-520/? A/DEBUG:     x28  00000000724b5dd4  x29  0000000012caeca0  x30  0000007f7a229320\r 07-24 15:58:02.224 520-520/? A/DEBUG:     sp   0000007fed6aefd0  pc   0000007f7a229320  pstate 0000000080000000\r 07-24 15:58:02.225 520-520/? A/DEBUG: backtrace:\r 07-24 15:58:02.225 520-520/? A/DEBUG:     #00 pc 000000000004d320  /data/app/com.topkarir.topkarir-1/split_config.arm64_v8a.apk (offset 0x715000)\r 07-24 15:58:02.560 520-520/? A/DEBUG: Tombstone written to: /data/tombstones/tombstone_07\r 07-24 15:58:02.560 520-520/? E/DEBUG: AM write failed: Broken pipe\r 07-24 15:58:02.578 1287-11433/? E/ActivityManager: Invalid thumbnail dimensions: 0x0\r \r =====================================================================\r \r **Edit by @xster:**\r \r  We're closing this bug since it's an issue in the Xiaomi OS and we can't fix it. See more info in https://github.com/flutter/flutter/issues/36822#issuecomment-591173690", "meta": {"posReactions": "25", "negReactions": "0"}}
{"id": "COM0", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "ROOT", "timestamp": "2019-07-24T09:53:17Z", "text": "cc @tvolkert ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM1", "speaker": "jason-simmons", "conversation_id": "ROOT", "reply_to": "COM0", "timestamp": "2019-07-24T18:02:24Z", "text": "The device codenames in the third graph are Xiaomi devices\r\n", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM2", "speaker": "tvolkert", "conversation_id": "ROOT", "reply_to": "COM1", "timestamp": "2019-07-24T18:29:24Z", "text": "The top device (santoni), for instance, is the Xiaomi Redmi 4X", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM3", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "COM2", "timestamp": "2019-07-25T07:23:38Z", "text": "yeah, it happens in every xiaomi devices who used android 6.0, and the most of my user use xiaomi devices", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM4", "speaker": "timsneath", "conversation_id": "ROOT", "reply_to": "COM3", "timestamp": "2019-07-31T02:47:02Z", "text": "Sorry to hear about the crashes. \r\n\r\nCouple of questions, @bayuramadeza -- is this a regression from previous versions, or can you reproduce it on older builds? \r\n\r\nAnd are you able to narrow this down to a reproducible crash with a small sample? I'm not aware that we're seeing general issues with these devices, so it would be nice to know the source of this (could be Flutter itself, a plug-in, or something else, of course). ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM5", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "COM4", "timestamp": "2019-07-31T03:04:11Z", "text": "@timsneath yes this regression happened since i used appbundle in playstore. when i tried to remove any plugin and all code, then i uploaded it to playstore it's still happened. So, i rechecked anything but there is no something wrong. \r\ni just confused, why it's running in release mode with apk, but it crashed after internal teesting with appbundle?", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM6", "speaker": "timsneath", "conversation_id": "ROOT", "reply_to": "COM5", "timestamp": "2019-07-31T03:10:05Z", "text": "Hmm, that's interesting. And you're using `Flutter 1.7.4+hotfix.4`? (Check with `flutter doctor -v`, if you wouldn't mind -- I want to make sure you're running the very latest hotfix revision.)\r\n\r\nSo to confirm:\r\n\r\n- Uploaded as an APK with Flutter 1.7.4+hotfix.4, the app does not crash on these devices\r\n- Uploaded as an APPBUNDLE with Flutter 1.7.4+hotfix.4, the app crashes on the same devices?", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM7", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "COM6", "timestamp": "2019-07-31T03:54:19Z", "text": "i used the latest beta.\r\n\r\n[\u2713] Flutter (Channel beta, v1.7.8+hotfix.4, on Mac OS X 10.14.5 18F132, locale en-ID)\r\n    \u2022 Flutter version 1.7.8+hotfix.4 at /Users/topkarir/Documents/developments/flutter\r\n    \u2022 Framework revision 20e59316b8 (12 days ago), 2019-07-18 20:04:33 -0700\r\n    \u2022 Engine revision fee001c93f\r\n    \u2022 Dart version 2.4.0\r\n\r\n \r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 28.0.3)\r\n    \u2022 Android SDK at /Users/topkarir/Library/Android/sdk\r\n    \u2022 Android NDK location not configured (optional; useful for native profiling support)\r\n    \u2022 Platform android-29, build-tools 28.0.3\r\n    \u2022 Java binary at: /Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1343-b01)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 10.2.1)\r\n    \u2022 Xcode at /Applications/Xcode.app/Contents/Developer\r\n    \u2022 Xcode 10.2.1, Build version 10E1001\r\n    \u2022 CocoaPods version 1.6.1\r\n\r\n[\u2713] iOS tools - develop for iOS devices\r\n    \u2022 ios-deploy 1.9.4\r\n\r\n[\u2713] Android Studio (version 3.4)\r\n    \u2022 Android Studio at /Applications/Android Studio.app/Contents\r\n    \u2022 Flutter plugin version 37.1.1\r\n    \u2022 Dart plugin version 183.6270\r\n    \u2022 Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1343-b01)\r\n\r\n[\u2713] VS Code (version 1.36.1)\r\n    \u2022 VS Code at /Applications/Visual Studio Code.app/Contents\r\n    \u2022 Flutter extension version 3.2.0\r\n\r\n[!] Connected device\r\n    ! No devices available\r\n\r\n! Doctor found issues in 1 category.\r\n\r\nAnd when i uploaded only apk in playstore it's running well in android 6.0 but when i uploaded appbundle the crash appears ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM8", "speaker": "blasten", "conversation_id": "ROOT", "reply_to": "COM7", "timestamp": "2019-07-31T21:20:23Z", "text": "We have requested a device to test this issue. It's expected to arrive between Aug 19 and Sep 30.\r\n\r\nIn the meanwhile, would it be possible to access the app's source code? If yes, feel free to send the link via Gitter.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM9", "speaker": "tvolkert", "conversation_id": "ROOT", "reply_to": "COM8", "timestamp": "2019-07-31T22:11:37Z", "text": "Please sign the CLA at https://cla.developers.google.com/ before sending us any source code, or we can't look at it \ud83d\ude42 ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM10", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "COM9", "timestamp": "2019-08-02T09:31:32Z", "text": "i'm sorry, i didn't get permission to share my code, ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM11", "speaker": "ajinasokan", "conversation_id": "ROOT", "reply_to": "COM10", "timestamp": "2019-08-03T08:03:27Z", "text": "@tvolkert @timsneath Is it possible to expedite fix for this issue? Around 30% of our users are on these devices and we already reached 2,500 crashes.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM12", "speaker": "bpillon", "conversation_id": "ROOT", "reply_to": "COM11", "timestamp": "2019-08-03T13:16:49Z", "text": "Same for me. Have crash on redmi 4 since 1.2, 1.0 is working so I have to keep using it. ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM13", "speaker": "tvolkert", "conversation_id": "ROOT", "reply_to": "COM12", "timestamp": "2019-08-08T19:43:49Z", "text": "@ajinasokan see https://github.com/flutter/flutter/issues/36822#issuecomment-517025572 -- once we receive devices to try to reproduce the crashes on, we will have a look.  In the meantime, if you can send us symbolicated stack traces, that would be helpful.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM14", "speaker": "gofur", "conversation_id": "ROOT", "reply_to": "COM13", "timestamp": "2019-08-09T09:29:23Z", "text": "i got the same problem... any solutions??? @bayuramadeza ?", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM15", "speaker": "ajinasokan", "conversation_id": "ROOT", "reply_to": "COM14", "timestamp": "2019-08-09T14:23:58Z", "text": "We had to upload APKs with split ABIs to solve this issue.\r\n\r\n@tvolkert I tried to reproduce this issue in a Redmi Note 4 (mido). But it is only causing in Android 6.0 and I'm unable to find the stock images for it because it is too old.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM16", "speaker": "HeorhiiKhrushch", "conversation_id": "ROOT", "reply_to": "COM15", "timestamp": "2019-08-12T13:26:29Z", "text": "same problem here, tested release build on Xiaomi Redmi Note4, android 6.0, my logs:\r\n\r\n08-12 16:20:30.419 2297-2438/com.miui.whetstone E/Whetstone-JNI: set process [index 0](addres 0x7f6f9c55c0), pid(24518), uid(0), processName(<MY_PACKAGE_NAME>), property(0)\r\n08-12 16:20:30.586 24518-24518/? A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x8 in tid 24518 (<MY_PACKAGE_NAME>)\r\n08-12 16:20:30.670 2297-2438/com.miui.whetstone E/Whetstone-JNI: set process [index 0](addres 0x7f6f9c55c0), pid(24606), uid(0), processName(<MY_PACKAGE_NAME>), property(0)\r\n08-12 16:20:30.863 24606-24606/? A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x8 in tid 24606 (<MY_PACKAGE_NAME>)\r\n08-12 16:20:30.954 2297-2438/com.miui.whetstone E/Whetstone-JNI: set process [index 0](addres 0x7f6f9c55c0), pid(24677), uid(0), processName(<MY_PACKAGE_NAME>), property(0)\r\n08-12 16:20:31.110 24677-24677/? A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x8 in tid 24677 (<MY_PACKAGE_NAME>)\r\n\r\n[\u2713] Flutter (Channel stable, v1.7.8+hotfix.4, on Mac OS X 10.14.6 18G84, locale en-UA)\r\n    \u2022 Flutter version 1.7.8+hotfix.4 at /Users/admin908/flutter\r\n    \u2022 Framework revision 20e59316b8 (3 weeks ago), 2019-07-18 20:04:33 -0700\r\n    \u2022 Engine revision fee001c93f\r\n    \u2022 Dart version 2.4.0\r\n\r\n \r\n[\u2713] Android toolchain - develop for Android devices (Android SDK version 28.0.3)\r\n    \u2022 Android SDK at /Users/admin908/Library/Android/sdk\r\n    \u2022 Android NDK location not configured (optional; useful for native profiling support)\r\n    \u2022 Platform android-28, build-tools 28.0.3\r\n    \u2022 ANDROID_HOME = /Users/admin908/Library/Android/sdk\r\n    \u2022 Java binary at: /Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java\r\n    \u2022 Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1343-b01)\r\n    \u2022 All Android licenses accepted.\r\n\r\n[\u2713] Xcode - develop for iOS and macOS (Xcode 10.3)\r\n    \u2022 Xcode at /Applications/Xcode.app/Contents/Developer\r\n    \u2022 Xcode 10.3, Build version 10G8\r\n    \u2022 CocoaPods version 1.6.1\r\n\r\n[\u2713] iOS tools - develop for iOS devices\r\n    \u2022 ios-deploy 1.9.4\r\n\r\n[\u2713] Android Studio (version 3.4)\r\n    \u2022 Android Studio at /Applications/Android Studio.app/Contents\r\n    \u2022 Flutter plugin version 37.1.1\r\n    \u2022 Dart plugin version 183.6270\r\n    \u2022 Java version OpenJDK Runtime Environment (build 1.8.0_152-release-1343-b01)\r\n\r\n[\u2713] VS Code (version 1.36.1)\r\n    \u2022 VS Code at /Applications/Visual Studio Code.app/Contents\r\n    \u2022 Flutter extension version 3.3.0\r\n\r\n[\u2713] Connected device (1 available)\r\n    \u2022 Redmi Note 4 \u2022 UOK7GY89LNSOSWEI \u2022 android-arm64 \u2022 Android 6.0 (API 23)\r\n\r\nBuilding app using 'flutter build appbundle', installing using bundletool.", "meta": {"posReactions": "1", "negReactions": "0"}}
{"id": "COM17", "speaker": "psovit", "conversation_id": "ROOT", "reply_to": "COM16", "timestamp": "2019-08-28T07:06:28Z", "text": "@ajinasokan did you solve the issue by splitting apk:\r\n`flutter build apk --target-platform android-arm,android-arm64 --split-per-abi`\r\nor  by splitting bundle:\r\n`flutter build appbundle --target-platform android-arm,android-arm64` ?", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM18", "speaker": "psovit", "conversation_id": "ROOT", "reply_to": "COM17", "timestamp": "2019-08-30T07:52:47Z", "text": "--removing my comment here as it was a different issue which was specific to Redmi developer options configuration...", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM19", "speaker": "ajinasokan", "conversation_id": "ROOT", "reply_to": "COM18", "timestamp": "2019-08-30T08:00:11Z", "text": "@psovit Second approach doesn't work. I'm not sure about the first approach. We are building APKs separately like this \r\n\r\n```\r\nflutter build apk --target-platform android-arm --build-name=$(BUILD_NAME) --build-number $(BUILD_NUMBER_32)\r\n```", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM20", "speaker": "codxse", "conversation_id": "ROOT", "reply_to": "COM19", "timestamp": "2019-08-30T08:59:55Z", "text": "Guys, I am following this issue too. We have major incident after release appbundle. A lot of android 6 device crash.\r\n\r\nWell, after move to split-apk approach ([described here](https://stackoverflow.com/questions/56607075/could-not-find-an-option-named-split-per-abi)), I finally can install the app on Android 6.0. Still I need more tests to ensure not happening on other device.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM21", "speaker": "HeorhiiKhrushch", "conversation_id": "ROOT", "reply_to": "COM20", "timestamp": "2019-08-30T09:26:39Z", "text": "@codxse I'm now using same approach (split-per-abi)\r\n\r\nNoticing, in case of building using appbundle, the device i'm using (Redmi Note 4 \u2022 android-arm64 \u2022 Android 6.0 (API 23)) gets strange apk of bundletool. Installed app is **much smaller** (installed app normal size is about 20Mb, while this app - about 3Mb), definitely missing native libs!\r\n![device-2019-08-30-122337](https://user-images.githubusercontent.com/23216320/64009853-54e27f80-cb21-11e9-8188-87ca7f881aec.png)\r\n", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM22", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "COM21", "timestamp": "2019-09-23T02:29:56Z", "text": "Hai @tvolkert , is there a new update for this issue? because i used to build apk command rather than build appbundle since this issue makes problem to my users. Thanks", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM23", "speaker": "blasten", "conversation_id": "ROOT", "reply_to": "COM22", "timestamp": "2019-09-23T04:37:34Z", "text": "@bayuramadeza I received the phone, but it came with Android 7.0 instead of 6.0. The crash doesn\u2019t occur on 7.0. To install 6.0, the phone needs to be rooted first... I will try that when I get a chance. ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM24", "speaker": "blasten", "conversation_id": "ROOT", "reply_to": "COM23", "timestamp": "2019-10-03T15:05:50Z", "text": "The stacktrace you posted is very similar to this one https://github.com/flutter/flutter/issues/37234#issuecomment-536893636.\r\n\r\nThe Android App Bundle team is looking into this issue and I will update as I find out more. In the meanwhile, have you tried to upload two APKs to the Play Store instead of an app bundle? \r\n\r\nYou can use `flutter build apk --split-per-abi` to generate two APKs for 32 and 64bit.", "meta": {"posReactions": "1", "negReactions": "0"}}
{"id": "COM25", "speaker": "blasten", "conversation_id": "ROOT", "reply_to": "COM24", "timestamp": "2019-10-03T17:35:07Z", "text": "The workaround is to use `flutter build apk --split-per-abi` to generate two APKs for 32 and 64bit.  \r\n\r\nI'm closing the issue, but feel free to reopen if the problem persists after uploading the two APKs.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM26", "speaker": "thesmalleyes", "conversation_id": "ROOT", "reply_to": "COM25", "timestamp": "2019-10-04T02:30:10Z", "text": "Yeah since this issue was opened, i have built apk --split, not appbundle anymore. I hope the issue can fix in appbundle, to optimize the app like playstore recommendation", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM27", "speaker": "sroddy", "conversation_id": "ROOT", "reply_to": "COM26", "timestamp": "2019-10-04T12:08:38Z", "text": "@blasten as appbundle is the Play Store recommendation, I think this issue should be kept open until a proper fix is found and if it not found, it should be underlined extremely well in the docs (or even by the tool during a build) that appbundle builds are currently unstable and not recommended by Flutter", "meta": {"posReactions": "9", "negReactions": "0"}}
{"id": "COM28", "speaker": "blasten", "conversation_id": "ROOT", "reply_to": "COM27", "timestamp": "2019-10-04T14:03:18Z", "text": "Just to clarify. This isn\u2019t a Flutter bug. I forwarded this issue to the Android team, and they are currently looking into ways to mitigate the problem at the Play Store level.\r\n\r\nI can keep the issue open and close once the upstream issue is fixed. ", "meta": {"posReactions": "3", "negReactions": "0"}}
{"id": "COM29", "speaker": "sroddy", "conversation_id": "ROOT", "reply_to": "COM28", "timestamp": "2019-10-04T23:03:55Z", "text": "Thank you for the clarification.\r\nIf I understood correctly splitting per ABI with the current flutter build script is done by adding 1000/2000/3000/4000/5000 to the base build number.\r\nThis means it would start causing potential issues with a base build number above 1000. Even if it seems a relatively high number, it is currently not that high (we are already at build number 200 after 18 months of release cycles).\r\nIt's also important to pay attention when switching back to appbundle, as the build number needs to go above the highest build number already released.\r\nSwitching back and forth multiple times between these two modes is not trivial.\r\nFor this reason we have currently decided to release fat apks with binary code for both architectures, accepting a 8MB overhead in the size, hoping to see this bug solved soon.", "meta": {"posReactions": "3", "negReactions": "0"}}
