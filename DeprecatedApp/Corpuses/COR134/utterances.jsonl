{"id": "ROOT", "speaker": "r1k0", "conversation_id": "ROOT", "reply_to": "ROOT", "timestamp": "2019-02-04T14:53:36Z", "text": "use to_list() instead of [] notation +label: docsite_pr\r \r ##### SUMMARY\r when there is a single interface, data['TABLE_interface']['ROW_interface'] is a dict, not an array (case handled like populate_structured_neighbors_lldp)\r \r <!--- HINT: Include \"Fixes #nnn\" if you are fixing an existing issue -->\r \r ##### ISSUE TYPE\r - Bugfix Pull Request\r \r ##### COMPONENT NAME\r nxos_facts.py\r \r ##### ADDITIONAL INFORMATION\r \r \r \r BEFORE fix\r ```paste below\r PLAY [nxos] ****************************************************************************************************\r \r TASK [Gathering Facts] *****************************************************************************************\r ok: [xxxxxxxxx]\r \r TASK [nxos_facts : nxos_facts | get nxos facts] ****************************************************************\r An exception occurred during task execution. To see the full traceback, use -vvv. The error was: TypeError: string indices must be integers\r fatal: [xxxxxxxxxx]: FAILED! => {\r     \"changed\": false, \r     \"rc\": 1\r }\r \r MSG:\r \r MODULE FAILURE\r See stdout/stderr for the exact error\r \r \r MODULE_STDERR:\r \r Traceback (most recent call last):\r   File \"/home/xxx/.ansible/tmp/ansible-local-1379dtiyx8/ansible-tmp-1549291810.13-164228265130085/AnsiballZ_nxos_facts.py\", line 113, in <module>\r     _ansiballz_main()\r   File \"/home/xxx/.ansible/tmp/ansible-local-1379dtiyx8/ansible-tmp-1549291810.13-164228265130085/AnsiballZ_nxos_facts.py\", line 105, in _ansiballz_main\r     invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r   File \"/home/xxx/.ansible/tmp/ansible-local-1379dtiyx8/ansible-tmp-1549291810.13-164228265130085/AnsiballZ_nxos_facts.py\", line 48, in invoke_module\r     imp.load_module('__main__', mod, module, MOD_DESC)\r   File \"/tmp/ansible_nxos_facts_payload_Txdrav/__main__.py\", line 1003, in <module>\r   File \"/tmp/ansible_nxos_facts_payload_Txdrav/__main__.py\", line 986, in main\r   File \"/tmp/ansible_nxos_facts_payload_Txdrav/__main__.py\", line 387, in populate\r   File \"/tmp/ansible_nxos_facts_payload_Txdrav/__main__.py\", line 422, in populate_structured_interfaces\r TypeError: string indices must be integers\r \r \r \r msg:\r MODULE FAILURE\r See stdout/stderr for the exact error\r \r PLAY RECAP *****************************************************************************************************\r xxxxxxx              : ok=1    changed=0    unreachable=0    failed=1   \r ```\r AFTER fix\r \r ```\r PLAY [nxos] ****************************************************************************************************\r \r TASK [Gathering Facts] *****************************************************************************************\r ok: [xxxxxxxxxx]\r \r TASK [nxos_facts : nxos_facts | get nxos facts] ****************************************************************\r ok: [xxxxxxxxx]\r \r PLAY RECAP *****************************************************************************************************\r xxxxxxxxx                 : ok=2    changed=0    unreachable=0    failed=0   \r \r \r \r \r ```\r ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM0", "speaker": "ansibot", "conversation_id": "ROOT", "reply_to": "ROOT", "timestamp": "2019-02-04T14:57:20Z", "text": "cc @GGabriele @jedelman8 @mikewiebe @rahushen @rcarrillocruz @trishnaguha @tstoner\n[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)\n<!--- boilerplate: notify --->", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM1", "speaker": "ansibot", "conversation_id": "ROOT", "reply_to": "COM0", "timestamp": "2019-02-04T14:57:20Z", "text": "@r1k0, just so you are aware we have a dedicated Working Group for network.\nYou can find other people interested in this in `#ansible-network` on Freenode IRC\nFor more information about communities, meetings and agendas see https://github.com/ansible/community\n\n[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)\n<!--- boilerplate: community_workgroups --->", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM2", "speaker": "ansibot", "conversation_id": "ROOT", "reply_to": "COM1", "timestamp": "2019-02-04T19:00:51Z", "text": "@r1k0 this PR contains the following merge commits:\n\n* https://github.com/ansible/ansible/commit/234d5988faec3639aa0bcdeb7775d963c52a9b21\n\nPlease [rebase your branch](http://docs.ansible.com/ansible/devel/dev_guide/developing_rebasing.html) to remove these commits.\n\n[click here for bot help](https://github.com/ansible/ansibullbot/blob/master/ISSUE_HELP.md)\n<!--- boilerplate: merge_commit_notify --->", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM3", "speaker": "r1k0", "conversation_id": "ROOT", "reply_to": "COM2", "timestamp": "2019-02-04T20:15:29Z", "text": "@trishnaguha somehow your suggestion fails the check. I tried twice via github gui (dont have git installed and no rights to) and I probably shouldn't make any more PR as they will fail.\r\nimo, should merge what works and then iterate not the other way around.  it's ok to not merge the original commit, plugins are fine.", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM4", "speaker": "trishnaguha", "conversation_id": "ROOT", "reply_to": "COM3", "timestamp": "2019-02-05T04:39:32Z", "text": "@r1k0 Please feel free to reopen the pull request so that we can discuss about the CI failure. Your original commit in the PR looked fine and will work, but the review I submitted is how ansible code base does it. ", "meta": {"posReactions": "0", "negReactions": "0"}}
{"id": "COM5", "speaker": "r1k0", "conversation_id": "ROOT", "reply_to": "COM4", "timestamp": "2019-02-05T19:17:54Z", "text": "@trishnaguha I'm sorry I don't have much time for other things beside work and family. I didn't realize a 4 line PR would pull me into a discussion on how to improve it by implementing a new code base and consequently figure why shippable would fail. I understand your request but I'm not sure it is the most efficient. Release fast and refactor after by actors that have an interest (they'll make time) in it (dissecting to_list() brings not value to my use case). Look, 24h later, a valid tiny patch is still not merged and we'd need to \"discuss\" why shippable failed on its improvement, not even on the patch itself. It's clearly less effective than merge and refactor later added to the fact I feel my time creating that PR was wasted, so not rewarding, hence I'll think twice before making another PR. There is much more to gain by going fast on smalls steps/iteration and securing what you have asap, that's my way of working anyway so very subjective I'll give you that. Feel free do whatever you see fit, I'm off to other things, good luck & sorry for the noise.", "meta": {"posReactions": "0", "negReactions": "0"}}
